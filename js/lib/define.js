// Custom AMD-like loader, does not support circular dependencies
const __MODULES__ = {
    cache: {},
    pending: {},
    hasCycle: false,
    checkCycles: () => {
        const visited = new Set();
        const recursionStack = new Set();
        // Recursive depth-first search to trace dependency cycles
        function trace(module) {
            var _a;
            if (recursionStack.has(module)) {
                return [module];
            }
            if (visited.has(module)) {
                return [];
            }
            visited.add(module);
            recursionStack.add(module);
            const deps = ((_a = __MODULES__.pending[module]) === null || _a === void 0 ? void 0 : _a.unmetDeps) || [];
            for (const dep of deps) {
                const cycle = trace(dep);
                if (cycle.length > 0) {
                    cycle.push(module);
                    return cycle;
                }
            }
            recursionStack.delete(module);
            return [];
        }
        for (const module of Object.keys(__MODULES__.pending)) {
            if (!visited.has(module)) {
                const cycle = trace(module);
                if (cycle.length > 0) {
                    __MODULES__.hasCycle = true;
                    const firstNode = cycle[0];
                    const lastIndex = cycle.lastIndexOf(firstNode);
                    const minimalCycle = cycle.slice(0, lastIndex + 1);
                    throw new Error("Circular dependency " + minimalCycle.reverse().join(" -> "));
                }
            }
        }
    },
    get: (name) => __MODULES__.cache[name],
    set: (name, value) => (__MODULES__.cache[name] = value),
    resolve: (name, from) => {
        if (/^\.\.?\//.test(name)) {
            const absolutePath = from.split("/").slice(0, -1);
            const relativeDep = name.split("/");
            while (relativeDep[0] === "..") {
                relativeDep.shift();
                absolutePath.pop();
            }
            while (relativeDep[0] === ".") {
                relativeDep.shift();
            }
            name = [...absolutePath, ...relativeDep].join("/");
        }
        else {
            name = name.replace(/^@?\//, __ROOT_PATH__ + "/js/");
        }
        return name;
    },
    refresh: () => {
        if (__MODULES__.hasCycle)
            return;
        for (const [key, { unmetDeps, load }] of Object.entries(__MODULES__.pending)) {
            if (unmetDeps.every((name) => name in __MODULES__.cache)) {
                delete __MODULES__.pending[key];
                load();
            }
        }
        __MODULES__.checkCycles();
    },
};
const define = (...args) => {
    let name, deps, factory;
    // Webpack AMD modules are named, TypeScript AMD modules are not
    if ("string" === typeof args[0]) {
        name = args[0];
        deps = args[1];
        factory = args[2];
    }
    else {
        name = document.currentScript.src
            .replace(document.location.origin, "")
            .replace(/\.js$/, "");
        deps = args[0];
        factory = args[1];
    }
    // TypeScript AMD modules pass in require and exports
    if ("require" === deps[0] && "exports" === deps[1]) {
        deps = deps.slice(2);
        const load = () => {
            const require = (dep) => __MODULES__.get(__MODULES__.resolve(dep, name));
            const exports = {};
            factory.call(this, require, exports, ...deps.map(require));
            __MODULES__.set(name, exports);
            __MODULES__.refresh();
        };
        const unmetDeps = [];
        for (const dep of deps) {
            const resolved = __MODULES__.resolve(dep, name);
            !(resolved in __MODULES__.cache) && unmetDeps.push(resolved);
        }
        for (const dep of unmetDeps) {
            if (!Object.values(__MODULES__.pending).some(({ unmetDeps }) => unmetDeps.includes(dep))) {
                __LOAD_SCRIPT__(dep, true);
            }
        }
        __MODULES__.pending[name] = { unmetDeps, load };
        __MODULES__.refresh();
    }
    else {
        // Webpack UMDs do not load dynamically, add these script tags in order
        __MODULES__.set(name, factory.call(this, ...deps.map(__MODULES__.get)));
    }
};
define.amd = true; // lol no it's not, but pretend we are AMD/RequireJS
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5lLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9kZWZpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsaUVBQWlFO0FBQ2pFLE1BQU0sV0FBVyxHQVNiO0lBQ0YsS0FBSyxFQUFFLEVBQUU7SUFDVCxPQUFPLEVBQUUsRUFBRTtJQUNYLFFBQVEsRUFBRSxLQUFLO0lBQ2YsV0FBVyxFQUFFLEdBQUcsRUFBRTtRQUNoQixNQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsRUFBVSxDQUFDO1FBQ2xDLE1BQU0sY0FBYyxHQUFHLElBQUksR0FBRyxFQUFVLENBQUM7UUFFekMsMERBQTBEO1FBQzFELFNBQVMsS0FBSyxDQUFDLE1BQWM7O1lBQzNCLElBQUksY0FBYyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUMvQixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbEIsQ0FBQztZQUNELElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUN4QixPQUFPLEVBQUUsQ0FBQztZQUNaLENBQUM7WUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BCLGNBQWMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFM0IsTUFBTSxJQUFJLEdBQUcsQ0FBQSxNQUFBLFdBQVcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLDBDQUFFLFNBQVMsS0FBSSxFQUFFLENBQUM7WUFDMUQsS0FBSyxNQUFNLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztnQkFDdkIsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN6QixJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ3JCLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ25CLE9BQU8sS0FBSyxDQUFDO2dCQUNm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Tix1RUFBdUU7UUFDdkUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUUsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsb0RBQW9EIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ3VzdG9tIEFNRC1saWtlIGxvYWRlciwgZG9lcyBub3Qgc3VwcG9ydCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbmNvbnN0IF9fTU9EVUxFU19fOiB7XG4gIGNhY2hlOiB7IFtuYW1lOiBzdHJpbmddOiBhbnkgfTtcbiAgcGVuZGluZzogeyBbbmFtZTogc3RyaW5nXTogeyB1bm1ldERlcHM6IHN0cmluZ1tdOyBsb2FkOiAoKSA9PiB2b2lkIH0gfTtcbiAgaGFzQ3ljbGU6IGJvb2xlYW47XG4gIGNoZWNrQ3ljbGVzOiAoKSA9PiB2b2lkO1xuICBnZXQ6IChuYW1lOiBzdHJpbmcpID0+IGFueTtcbiAgc2V0OiAobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2b2lkO1xuICByZXNvbHZlOiAoZGVwOiBzdHJpbmcsIGN1cnJlbnQ6IHN0cmluZykgPT4gc3RyaW5nO1xuICByZWZyZXNoOiAoKSA9PiB2b2lkO1xufSA9IHtcbiAgY2FjaGU6IHt9LFxuICBwZW5kaW5nOiB7fSxcbiAgaGFzQ3ljbGU6IGZhbHNlLFxuICBjaGVja0N5Y2xlczogKCkgPT4ge1xuICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCByZWN1cnNpb25TdGFjayA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gUmVjdXJzaXZlIGRlcHRoLWZpcnN0IHNlYXJjaCB0byB0cmFjZSBkZXBlbmRlbmN5IGN5Y2xlc1xuICAgIGZ1bmN0aW9uIHRyYWNlKG1vZHVsZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgaWYgKHJlY3Vyc2lvblN0YWNrLmhhcyhtb2R1bGUpKSB7XG4gICAgICAgIHJldHVybiBbbW9kdWxlXTtcbiAgICAgIH1cbiAgICAgIGlmICh2aXNpdGVkLmhhcyhtb2R1bGUpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgdmlzaXRlZC5hZGQobW9kdWxlKTtcbiAgICAgIHJlY3Vyc2lvblN0YWNrLmFkZChtb2R1bGUpO1xuXG4gICAgICBjb25zdCBkZXBzID0gX19NT0RVTEVTX18ucGVuZGluZ1ttb2R1bGVdPy51bm1ldERlcHMgfHwgW107XG4gICAgICBmb3IgKGNvbnN0IGRlcCBvZiBkZXBzKSB7XG4gICAgICAgIGNvbnN0IGN5Y2xlID0gdHJhY2UoZGVwKTtcbiAgICAgICAgaWYgKGN5Y2xlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjeWNsZS5wdXNoKG1vZHVsZSk7XG4gICAgICAgICAgcmV0dXJuIGN5Y2xlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlY3Vyc2lvblN0YWNrLmRlbGV0ZShtb2R1bGUpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgbW9kdWxlIG9mIE9iamVjdC5rZXlzKF9fTU9EVUxFU19fLnBlbmRpbmcpKSB7XG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKG1vZHVsZSkpIHtcbiAgICAgICAgY29uc3QgY3ljbGUgPSB0cmFjZShtb2R1bGUpO1xuXG4gICAgICAgIGlmIChjeWNsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgX19NT0RVTEVTX18uaGFzQ3ljbGUgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IGZpcnN0Tm9kZSA9IGN5Y2xlWzBdO1xuICAgICAgICAgIGNvbnN0IGxhc3RJbmRleCA9IGN5Y2xlLmxhc3RJbmRleE9mKGZpcnN0Tm9kZSk7XG4gICAgICAgICAgY29uc3QgbWluaW1hbEN5Y2xlID0gY3ljbGUuc2xpY2UoMCwgbGFzdEluZGV4ICsgMSk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJDaXJjdWxhciBkZXBlbmRlbmN5IFwiICsgbWluaW1hbEN5Y2xlLnJldmVyc2UoKS5qb2luKFwiIC0+IFwiKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBnZXQ6IChuYW1lOiBzdHJpbmcpID0+IF9fTU9EVUxFU19fLmNhY2hlW25hbWVdLFxuICBzZXQ6IChuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IChfX01PRFVMRVNfXy5jYWNoZVtuYW1lXSA9IHZhbHVlKSxcbiAgcmVzb2x2ZTogKG5hbWU6IHN0cmluZywgZnJvbTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKC9eXFwuXFwuP1xcLy8udGVzdChuYW1lKSkge1xuICAgICAgY29uc3QgYWJzb2x1dGVQYXRoID0gZnJvbS5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpO1xuICAgICAgY29uc3QgcmVsYXRpdmVEZXAgPSBuYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgIHdoaWxlIChyZWxhdGl2ZURlcFswXSA9PT0gXCIuLlwiKSB7XG4gICAgICAgIHJlbGF0aXZlRGVwLnNoaWZ0KCk7XG4gICAgICAgIGFic29sdXRlUGF0aC5wb3AoKTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChyZWxhdGl2ZURlcFswXSA9PT0gXCIuXCIpIHtcbiAgICAgICAgcmVsYXRpdmVEZXAuc2hpZnQoKTtcbiAgICAgIH1cbiAgICAgIG5hbWUgPSBbLi4uYWJzb2x1dGVQYXRoLCAuLi5yZWxhdGl2ZURlcF0uam9pbihcIi9cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL15AP1xcLy8sIF9fUk9PVF9QQVRIX18gKyBcIi9qcy9cIik7XG4gICAgfVxuICAgIHJldHVybiBuYW1lO1xuICB9LFxuICByZWZyZXNoOiAoKSA9PiB7XG4gICAgaWYgKF9fTU9EVUxFU19fLmhhc0N5Y2xlKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBba2V5LCB7IHVubWV0RGVwcywgbG9hZCB9XSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIF9fTU9EVUxFU19fLnBlbmRpbmcsXG4gICAgKSkge1xuICAgICAgaWYgKHVubWV0RGVwcy5ldmVyeSgobmFtZSkgPT4gbmFtZSBpbiBfX01PRFVMRVNfXy5jYWNoZSkpIHtcbiAgICAgICAgZGVsZXRlIF9fTU9EVUxFU19fLnBlbmRpbmdba2V5XTtcbiAgICAgICAgbG9hZCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBfX01PRFVMRVNfXy5jaGVja0N5Y2xlcygpO1xuICB9LFxufTtcblxuY29uc3QgZGVmaW5lID0gKC4uLmFyZ3M6IGFueSkgPT4ge1xuICBsZXQgbmFtZTogc3RyaW5nLCBkZXBzOiBBcnJheTxzdHJpbmc+LCBmYWN0b3J5OiBGdW5jdGlvbjtcblxuICAvLyBXZWJwYWNrIEFNRCBtb2R1bGVzIGFyZSBuYW1lZCwgVHlwZVNjcmlwdCBBTUQgbW9kdWxlcyBhcmUgbm90XG4gIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgYXJnc1swXSkge1xuICAgIG5hbWUgPSBhcmdzWzBdO1xuICAgIGRlcHMgPSBhcmdzWzFdO1xuICAgIGZhY3RvcnkgPSBhcmdzWzJdO1xuICB9IGVsc2Uge1xuICAgIG5hbWUgPSAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCBhcyBIVE1MU2NyaXB0RWxlbWVudCkuc3JjXG4gICAgICAucmVwbGFjZShkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4sIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFwuanMkLywgXCJcIik7XG4gICAgZGVwcyA9IGFyZ3NbMF07XG4gICAgZmFjdG9yeSA9IGFyZ3NbMV07XG4gIH1cblxuICAvLyBUeXBlU2NyaXB0IEFNRCBtb2R1bGVzIHBhc3MgaW4gcmVxdWlyZSBhbmQgZXhwb3J0c1xuICBpZiAoXCJyZXF1aXJlXCIgPT09IGRlcHNbMF0gJiYgXCJleHBvcnRzXCIgPT09IGRlcHNbMV0pIHtcbiAgICBkZXBzID0gZGVwcy5zbGljZSgyKTtcblxuICAgIGNvbnN0IGxvYWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1aXJlID0gKGRlcDogc3RyaW5nKSA9PlxuICAgICAgICBfX01PRFVMRVNfXy5nZXQoX19NT0RVTEVTX18ucmVzb2x2ZShkZXAsIG5hbWUpKTtcbiAgICAgIGNvbnN0IGV4cG9ydHMgPSB7fTtcbiAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCByZXF1aXJlLCBleHBvcnRzLCAuLi5kZXBzLm1hcChyZXF1aXJlKSk7XG4gICAgICBfX01PRFVMRVNfXy5zZXQobmFtZSwgZXhwb3J0cyk7XG4gICAgICBfX01PRFVMRVNfXy5yZWZyZXNoKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHVubWV0RGVwcyA9IFtdO1xuICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgIGNvbnN0IHJlc29sdmVkID0gX19NT0RVTEVTX18ucmVzb2x2ZShkZXAsIG5hbWUpO1xuICAgICAgIShyZXNvbHZlZCBpbiBfX01PRFVMRVNfXy5jYWNoZSkgJiYgdW5tZXREZXBzLnB1c2gocmVzb2x2ZWQpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZGVwIG9mIHVubWV0RGVwcykge1xuICAgICAgaWYgKFxuICAgICAgICAhT2JqZWN0LnZhbHVlcyhfX01PRFVMRVNfXy5wZW5kaW5nKS5zb21lKCh7IHVubWV0RGVwcyB9KSA9PlxuICAgICAgICAgIHVubWV0RGVwcy5pbmNsdWRlcyhkZXApLFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgX19MT0FEX1NDUklQVF9fKGRlcCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX19NT0RVTEVTX18ucGVuZGluZ1tuYW1lXSA9IHsgdW5tZXREZXBzLCBsb2FkIH07XG4gICAgX19NT0RVTEVTX18ucmVmcmVzaCgpO1xuICB9IGVsc2Uge1xuICAgIC8vIFdlYnBhY2sgVU1EcyBkbyBub3QgbG9hZCBkeW5hbWljYWxseSwgYWRkIHRoZXNlIHNjcmlwdCB0YWdzIGluIG9yZGVyXG4gICAgX19NT0RVTEVTX18uc2V0KG5hbWUsIGZhY3RvcnkuY2FsbCh0aGlzLCAuLi5kZXBzLm1hcChfX01PRFVMRVNfXy5nZXQpKSk7XG4gIH1cbn07XG5cbmRlZmluZS5hbWQgPSB0cnVlOyAvLyBsb2wgbm8gaXQncyBub3QsIGJ1dCBwcmV0ZW5kIHdlIGFyZSBBTUQvUmVxdWlyZUpTXG4iXX0=