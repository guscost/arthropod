define(["require", "exports", "react/jsx-runtime", "react", "lucide-react", "@/lib/utils", "@/components/ui/avatar", "@/components/ui/button", "@/components/ui/card", "@/components/ui/command", "@/components/ui/dialog", "@/components/ui/input", "@/components/ui/tooltip"], function (require, exports, jsx_runtime_1, React, lucide_react_1, utils_1, avatar_1, button_1, card_1, command_1, dialog_1, input_1, tooltip_1) {
    "use client";
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CardsChat = CardsChat;
    const users = [
        {
            name: "Olivia Martin",
            email: "m@example.com",
            avatar: "/avatars/01.png",
        },
        {
            name: "Isabella Nguyen",
            email: "isabella.nguyen@email.com",
            avatar: "/avatars/03.png",
        },
        {
            name: "Emma Wilson",
            email: "emma@example.com",
            avatar: "/avatars/05.png",
        },
        {
            name: "Jackson Lee",
            email: "lee@example.com",
            avatar: "/avatars/02.png",
        },
        {
            name: "William Kim",
            email: "will@email.com",
            avatar: "/avatars/04.png",
        },
    ];
    function CardsChat() {
        const [open, setOpen] = React.useState(false);
        const [selectedUsers, setSelectedUsers] = React.useState([]);
        const [messages, setMessages] = React.useState([
            {
                role: "agent",
                content: "Hi, how can I help you today?",
            },
            {
                role: "user",
                content: "Hey, I'm having trouble with my account.",
            },
            {
                role: "agent",
                content: "What seems to be the problem?",
            },
            {
                role: "user",
                content: "I can't log in.",
            },
        ]);
        const [input, setInput] = React.useState("");
        const inputLength = input.trim().length;
        return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: "flex flex-row items-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-4", children: [(0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { className: "border", children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: "/avatars/01.png", alt: "Image" }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: "S" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col gap-0.5", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm leading-none font-medium", children: "Sofia Davis" }), (0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground text-xs", children: "m@example.com" })] })] }), (0, jsx_runtime_1.jsx)(tooltip_1.TooltipProvider, { delayDuration: 0, children: (0, jsx_runtime_1.jsxs)(tooltip_1.Tooltip, { children: [(0, jsx_runtime_1.jsx)(tooltip_1.TooltipTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { size: "icon", variant: "secondary", className: "ml-auto size-8 rounded-full", onClick: () => setOpen(true), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.PlusIcon, {}), (0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: "New message" })] }) }), (0, jsx_runtime_1.jsx)(tooltip_1.TooltipContent, { sideOffset: 10, children: "New message" })] }) })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "flex flex-col gap-4", children: messages.map((message, index) => ((0, jsx_runtime_1.jsx)("div", { className: (0, utils_1.cn)("flex w-max max-w-[75%] flex-col gap-2 rounded-lg px-3 py-2 text-sm", message.role === "user"
                                        ? "bg-primary text-primary-foreground ml-auto"
                                        : "bg-muted"), children: message.content }, index))) }) }), (0, jsx_runtime_1.jsx)(card_1.CardFooter, { children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: (event) => {
                                    event.preventDefault();
                                    if (inputLength === 0)
                                        return;
                                    setMessages([
                                        ...messages,
                                        {
                                            role: "user",
                                            content: input,
                                        },
                                    ]);
                                    setInput("");
                                }, className: "relative w-full", children: [(0, jsx_runtime_1.jsx)(input_1.Input, { id: "message", placeholder: "Type your message...", className: "flex-1 pr-10", autoComplete: "off", value: input, onChange: (event) => setInput(event.target.value) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { type: "submit", size: "icon", className: "absolute top-1/2 right-2 size-6 -translate-y-1/2 rounded-full", disabled: inputLength === 0, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowUpIcon, { className: "size-3.5" }), (0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: "Send" })] })] }) })] }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: open, onOpenChange: setOpen, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: "gap-0 p-0 outline-none", children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { className: "px-4 pt-5 pb-4", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "New message" }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: "Invite a user to this thread. This will create a new group message." })] }), (0, jsx_runtime_1.jsxs)(command_1.Command, { className: "overflow-hidden rounded-t-none border-t bg-transparent", children: [(0, jsx_runtime_1.jsx)(command_1.CommandInput, { placeholder: "Search user..." }), (0, jsx_runtime_1.jsxs)(command_1.CommandList, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandEmpty, { children: "No users found." }), (0, jsx_runtime_1.jsx)(command_1.CommandGroup, { children: users.map((user) => ((0, jsx_runtime_1.jsxs)(command_1.CommandItem, { "data-active": selectedUsers.includes(user), className: "data-[active=true]:opacity-50", onSelect: () => {
                                                        if (selectedUsers.includes(user)) {
                                                            return setSelectedUsers(selectedUsers.filter((selectedUser) => selectedUser !== user));
                                                        }
                                                        return setSelectedUsers([...users].filter((u) => [...selectedUsers, user].includes(u)));
                                                    }, children: [(0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { className: "border", children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: user.avatar, alt: "Image" }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: user.name[0] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "ml-2", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm leading-none font-medium", children: user.name }), (0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground text-sm", children: user.email })] }), selectedUsers.includes(user) ? ((0, jsx_runtime_1.jsx)(lucide_react_1.CheckIcon, { className: "text-primary ml-auto flex size-4" })) : null] }, user.email))) })] })] }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { className: "flex items-center border-t p-4 sm:justify-between", children: [selectedUsers.length > 0 ? ((0, jsx_runtime_1.jsx)("div", { className: "flex -space-x-2 overflow-hidden", children: selectedUsers.map((user) => ((0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { className: "inline-block border", children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: user.avatar }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: user.name[0] })] }, user.email))) })) : ((0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground text-sm", children: "Select users to add to this thread." })), (0, jsx_runtime_1.jsx)(button_1.Button, { disabled: selectedUsers.length < 2, size: "sm", onClick: () => {
                                            setOpen(false);
                                        }, children: "Continue" })] })] }) })] }));
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2RlbW8tY2FyZHMvY2hhdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtJQUFBLFlBQVksQ0FBQzs7O0lBb0ViLDhCQWlNQztJQS9ORCxNQUFNLEtBQUssR0FBRztRQUNaO1lBQ0UsSUFBSSxFQUFFLGVBQWU7WUFDckIsS0FBSyxFQUFFLGVBQWU7WUFDdEIsTUFBTSxFQUFFLGlCQUFpQjtTQUMxQjtRQUNEO1lBQ0UsSUFBSSxFQUFFLGlCQUFpQjtZQUN2QixLQUFLLEVBQUUsMkJBQTJCO1lBQ2xDLE1BQU0sRUFBRSxpQkFBaUI7U0FDMUI7UUFDRDtZQUNFLElBQUksRUFBRSxhQUFhO1lBQ25CLEtBQUssRUFBRSxrQkFBa0I7WUFDekIsTUFBTSxFQUFFLGlCQUFpQjtTQUMxQjtRQUNEO1lBQ0UsSUFBSSxFQUFFLGFBQWE7WUFDbkIsS0FBSyxFQUFFLGlCQUFpQjtZQUN4QixNQUFNLEVBQUUsaUJBQWlCO1NBQzFCO1FBQ0Q7WUFDRSxJQUFJLEVBQUUsYUFBYTtZQUNuQixLQUFLLEVBQUUsZ0JBQWdCO1lBQ3ZCLE1BQU0sRUFBRSxpQkFBaUI7U0FDMUI7S0FDTyxDQUFDO0lBSVgsU0FBZ0IsU0FBUztRQUN2QixNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQVMsRUFBRSxDQUFDLENBQUM7UUFFckUsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1lBQzdDO2dCQUNFLElBQUksRUFBRSxPQUFPO2dCQUNiLE9BQU8sRUFBRSwrQkFBK0I7YUFDekM7WUFDRDtnQkFDRSxJQUFJLEVBQUUsTUFBTTtnQkFDWixPQUFP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SyxDQUdkLENBQ1YsQ0FBQyxHQUNFLENBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FDRiw4QkFBRyxTQUFTLEVBQUMsK0JBQStCLG9EQUV4QyxDQUNMLEVBQ0QsdUJBQUMsZUFBTSxJQUNMLFFBQVEsRUFBRSxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsRUFDbEMsSUFBSSxFQUFDLElBQUksRUFDVCxPQUFPLEVBQUUsR0FBRyxFQUFFOzRDQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzt3Q0FDakIsQ0FBQyx5QkFHTSxJQUNJLElBQ0QsR0FDVCxJQUNSLENBQ0osQ0FBQztJQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBcnJvd1VwSWNvbiwgQ2hlY2tJY29uLCBQbHVzSWNvbiB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcblxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB7IEF2YXRhciwgQXZhdGFyRmFsbGJhY2ssIEF2YXRhckltYWdlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9hdmF0YXJcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQge1xuICBDYXJkLFxuICBDYXJkQ29udGVudCxcbiAgQ2FyZEZvb3RlcixcbiAgQ2FyZEhlYWRlcixcbn0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9jYXJkXCI7XG5pbXBvcnQge1xuICBDb21tYW5kLFxuICBDb21tYW5kRW1wdHksXG4gIENvbW1hbmRHcm91cCxcbiAgQ29tbWFuZElucHV0LFxuICBDb21tYW5kSXRlbSxcbiAgQ29tbWFuZExpc3QsXG59IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvY29tbWFuZFwiO1xuaW1wb3J0IHtcbiAgRGlhbG9nLFxuICBEaWFsb2dDb250ZW50LFxuICBEaWFsb2dEZXNjcmlwdGlvbixcbiAgRGlhbG9nRm9vdGVyLFxuICBEaWFsb2dIZWFkZXIsXG4gIERpYWxvZ1RpdGxlLFxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2RpYWxvZ1wiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCI7XG5pbXBvcnQge1xuICBUb29sdGlwLFxuICBUb29sdGlwQ29udGVudCxcbiAgVG9vbHRpcFByb3ZpZGVyLFxuICBUb29sdGlwVHJpZ2dlcixcbn0gZnJvbSBcIkAvY29tcG9uZW50cy91aS90b29sdGlwXCI7XG5cbmNvbnN0IHVzZXJzID0gW1xuICB7XG4gICAgbmFtZTogXCJPbGl2aWEgTWFydGluXCIsXG4gICAgZW1haWw6IFwibUBleGFtcGxlLmNvbVwiLFxuICAgIGF2YXRhcjogXCIvYXZhdGFycy8wMS5wbmdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiSXNhYmVsbGEgTmd1eWVuXCIsXG4gICAgZW1haWw6IFwiaXNhYmVsbGEubmd1eWVuQGVtYWlsLmNvbVwiLFxuICAgIGF2YXRhcjogXCIvYXZhdGFycy8wMy5wbmdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRW1tYSBXaWxzb25cIixcbiAgICBlbWFpbDogXCJlbW1hQGV4YW1wbGUuY29tXCIsXG4gICAgYXZhdGFyOiBcIi9hdmF0YXJzLzA1LnBuZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJKYWNrc29uIExlZVwiLFxuICAgIGVtYWlsOiBcImxlZUBleGFtcGxlLmNvbVwiLFxuICAgIGF2YXRhcjogXCIvYXZhdGFycy8wMi5wbmdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiV2lsbGlhbSBLaW1cIixcbiAgICBlbWFpbDogXCJ3aWxsQGVtYWlsLmNvbVwiLFxuICAgIGF2YXRhcjogXCIvYXZhdGFycy8wNC5wbmdcIixcbiAgfSxcbl0gYXMgY29uc3Q7XG5cbnR5cGUgVXNlciA9ICh0eXBlb2YgdXNlcnMpW251bWJlcl07XG5cbmV4cG9ydCBmdW5jdGlvbiBDYXJkc0NoYXQoKSB7XG4gIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkVXNlcnMsIHNldFNlbGVjdGVkVXNlcnNdID0gUmVhY3QudXNlU3RhdGU8VXNlcltdPihbXSk7XG5cbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSBSZWFjdC51c2VTdGF0ZShbXG4gICAge1xuICAgICAgcm9sZTogXCJhZ2VudFwiLFxuICAgICAgY29udGVudDogXCJIaSwgaG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICBjb250ZW50OiBcIkhleSwgSSdtIGhhdmluZyB0cm91YmxlIHdpdGggbXkgYWNjb3VudC5cIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHJvbGU6IFwiYWdlbnRcIixcbiAgICAgIGNvbnRlbnQ6IFwiV2hhdCBzZWVtcyB0byBiZSB0aGUgcHJvYmxlbT9cIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgY29udGVudDogXCJJIGNhbid0IGxvZyBpbi5cIixcbiAgICB9LFxuICBdKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSBSZWFjdC51c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgaW5wdXRMZW5ndGggPSBpbnB1dC50cmltKCkubGVuZ3RoO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxDYXJkPlxuICAgICAgICA8Q2FyZEhlYWRlciBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICAgIDxBdmF0YXIgY2xhc3NOYW1lPVwiYm9yZGVyXCI+XG4gICAgICAgICAgICAgIDxBdmF0YXJJbWFnZSBzcmM9XCIvYXZhdGFycy8wMS5wbmdcIiBhbHQ9XCJJbWFnZVwiIC8+XG4gICAgICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz5TPC9BdmF0YXJGYWxsYmFjaz5cbiAgICAgICAgICAgIDwvQXZhdGFyPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0wLjVcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBsZWFkaW5nLW5vbmUgZm9udC1tZWRpdW1cIj5Tb2ZpYSBEYXZpczwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHRleHQteHNcIj5tQGV4YW1wbGUuY29tPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPFRvb2x0aXBQcm92aWRlciBkZWxheUR1cmF0aW9uPXswfT5cbiAgICAgICAgICAgIDxUb29sdGlwPlxuICAgICAgICAgICAgICA8VG9vbHRpcFRyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLWF1dG8gc2l6ZS04IHJvdW5kZWQtZnVsbFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRPcGVuKHRydWUpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxQbHVzSWNvbiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPk5ldyBtZXNzYWdlPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L1Rvb2x0aXBUcmlnZ2VyPlxuICAgICAgICAgICAgICA8VG9vbHRpcENvbnRlbnQgc2lkZU9mZnNldD17MTB9Pk5ldyBtZXNzYWdlPC9Ub29sdGlwQ29udGVudD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICA8L1Rvb2x0aXBQcm92aWRlcj5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC00XCI+XG4gICAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgXCJmbGV4IHctbWF4IG1heC13LVs3NSVdIGZsZXgtY29sIGdhcC0yIHJvdW5kZWQtbGcgcHgtMyBweS0yIHRleHQtc21cIixcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9PT0gXCJ1c2VyXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcImJnLXByaW1hcnkgdGV4dC1wcmltYXJ5LWZvcmVncm91bmQgbWwtYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgIDogXCJiZy1tdXRlZFwiLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWVzc2FnZS5jb250ZW50fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICA8Q2FyZEZvb3Rlcj5cbiAgICAgICAgICA8Zm9ybVxuICAgICAgICAgICAgb25TdWJtaXQ9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICBpZiAoaW5wdXRMZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoW1xuICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogaW5wdXQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIHNldElucHV0KFwiXCIpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIGlkPVwibWVzc2FnZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSB5b3VyIG1lc3NhZ2UuLi5cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgcHItMTBcIlxuICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHNldElucHV0KGV2ZW50LnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMS8yIHJpZ2h0LTIgc2l6ZS02IC10cmFuc2xhdGUteS0xLzIgcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lucHV0TGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QXJyb3dVcEljb24gY2xhc3NOYW1lPVwic2l6ZS0zLjVcIiAvPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+U2VuZDwvc3Bhbj5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9DYXJkRm9vdGVyPlxuICAgICAgPC9DYXJkPlxuICAgICAgPERpYWxvZyBvcGVuPXtvcGVufSBvbk9wZW5DaGFuZ2U9e3NldE9wZW59PlxuICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJnYXAtMCBwLTAgb3V0bGluZS1ub25lXCI+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlciBjbGFzc05hbWU9XCJweC00IHB0LTUgcGItNFwiPlxuICAgICAgICAgICAgPERpYWxvZ1RpdGxlPk5ldyBtZXNzYWdlPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgSW52aXRlIGEgdXNlciB0byB0aGlzIHRocmVhZC4gVGhpcyB3aWxsIGNyZWF0ZSBhIG5ldyBncm91cFxuICAgICAgICAgICAgICBtZXNzYWdlLlxuICAgICAgICAgICAgPC9EaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICA8Q29tbWFuZCBjbGFzc05hbWU9XCJvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC10LW5vbmUgYm9yZGVyLXQgYmctdHJhbnNwYXJlbnRcIj5cbiAgICAgICAgICAgIDxDb21tYW5kSW5wdXQgcGxhY2Vob2xkZXI9XCJTZWFyY2ggdXNlci4uLlwiIC8+XG4gICAgICAgICAgICA8Q29tbWFuZExpc3Q+XG4gICAgICAgICAgICAgIDxDb21tYW5kRW1wdHk+Tm8gdXNlcnMgZm91bmQuPC9Db21tYW5kRW1wdHk+XG4gICAgICAgICAgICAgIDxDb21tYW5kR3JvdXA+XG4gICAgICAgICAgICAgICAge3VzZXJzLm1hcCgodXNlcikgPT4gKFxuICAgICAgICAgICAgICAgICAgPENvbW1hbmRJdGVtXG4gICAgICAgICAgICAgICAgICAgIGtleT17dXNlci5lbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3RpdmU9e3NlbGVjdGVkVXNlcnMuaW5jbHVkZXModXNlcil9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImRhdGEtW2FjdGl2ZT10cnVlXTpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRVc2Vycy5pbmNsdWRlcyh1c2VyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFNlbGVjdGVkVXNlcnMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVXNlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxlY3RlZFVzZXIpID0+IHNlbGVjdGVkVXNlciAhPT0gdXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFNlbGVjdGVkVXNlcnMoXG4gICAgICAgICAgICAgICAgICAgICAgICBbLi4udXNlcnNdLmZpbHRlcigodSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgWy4uLnNlbGVjdGVkVXNlcnMsIHVzZXJdLmluY2x1ZGVzKHUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8QXZhdGFyIGNsYXNzTmFtZT1cImJvcmRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxBdmF0YXJJbWFnZSBzcmM9e3VzZXIuYXZhdGFyfSBhbHQ9XCJJbWFnZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPEF2YXRhckZhbGxiYWNrPnt1c2VyLm5hbWVbMF19PC9BdmF0YXJGYWxsYmFjaz5cbiAgICAgICAgICAgICAgICAgICAgPC9BdmF0YXI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gbGVhZGluZy1ub25lIGZvbnQtbWVkaXVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dXNlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIuZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkVXNlcnMuaW5jbHVkZXModXNlcikgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPENoZWNrSWNvbiBjbGFzc05hbWU9XCJ0ZXh0LXByaW1hcnkgbWwtYXV0byBmbGV4IHNpemUtNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgPC9Db21tYW5kSXRlbT5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9Db21tYW5kR3JvdXA+XG4gICAgICAgICAgICA8L0NvbW1hbmRMaXN0PlxuICAgICAgICAgIDwvQ29tbWFuZD5cbiAgICAgICAgICA8RGlhbG9nRm9vdGVyIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGJvcmRlci10IHAtNCBzbTpqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgIHtzZWxlY3RlZFVzZXJzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCAtc3BhY2UteC0yIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgIHtzZWxlY3RlZFVzZXJzLm1hcCgodXNlcikgPT4gKFxuICAgICAgICAgICAgICAgICAgPEF2YXRhciBrZXk9e3VzZXIuZW1haWx9IGNsYXNzTmFtZT1cImlubGluZS1ibG9jayBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEF2YXRhckltYWdlIHNyYz17dXNlci5hdmF0YXJ9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz57dXNlci5uYW1lWzBdfTwvQXZhdGFyRmFsbGJhY2s+XG4gICAgICAgICAgICAgICAgICA8L0F2YXRhcj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIFNlbGVjdCB1c2VycyB0byBhZGQgdG8gdGhpcyB0aHJlYWQuXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtzZWxlY3RlZFVzZXJzLmxlbmd0aCA8IDJ9XG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ29udGludWVcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvRGlhbG9nRm9vdGVyPlxuICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICA8L0RpYWxvZz5cbiAgICA8Lz5cbiAgKTtcbn1cbiJdfQ==