define(["require", "exports", "react/jsx-runtime", "react", "recharts", "@/lib/utils"], function (require, exports, jsx_runtime_1, React, RechartsPrimitive, utils_1) {
    "use client";
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ChartStyle = exports.ChartLegendContent = exports.ChartLegend = exports.ChartTooltipContent = exports.ChartTooltip = exports.ChartContainer = void 0;
    // Format: { THEME_NAME: CSS_SELECTOR }
    const THEMES = { light: "", dark: ".dark" };
    const ChartContext = React.createContext(null);
    function useChart() {
        const context = React.useContext(ChartContext);
        if (!context) {
            throw new Error("useChart must be used within a <ChartContainer />");
        }
        return context;
    }
    const ChartContainer = React.forwardRef(({ id, className, children, config, ...props }, ref) => {
        const uniqueId = React.useId();
        const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`;
        return ((0, jsx_runtime_1.jsx)(ChartContext.Provider, { value: { config }, children: (0, jsx_runtime_1.jsxs)("div", { "data-chart": chartId, ref: ref, className: (0, utils_1.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none", className), ...props, children: [(0, jsx_runtime_1.jsx)(ChartStyle, { id: chartId, config: config }), (0, jsx_runtime_1.jsx)(RechartsPrimitive.ResponsiveContainer, { children: children })] }) }));
    });
    exports.ChartContainer = ChartContainer;
    ChartContainer.displayName = "Chart";
    const ChartStyle = ({ id, config }) => {
        const colorConfig = Object.entries(config).filter(([, config]) => config.theme || config.color);
        if (!colorConfig.length) {
            return null;
        }
        return ((0, jsx_runtime_1.jsx)("style", { dangerouslySetInnerHTML: {
                __html: Object.entries(THEMES)
                    .map(([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
                    .map(([key, itemConfig]) => {
                    var _a;
                    const color = ((_a = itemConfig.theme) === null || _a === void 0 ? void 0 : _a[theme]) ||
                        itemConfig.color;
                    return color ? `  --color-${key}: ${color};` : null;
                })
                    .join("\n")}
}
`)
                    .join("\n"),
            } }));
    };
    exports.ChartStyle = ChartStyle;
    const ChartTooltip = RechartsPrimitive.Tooltip;
    exports.ChartTooltip = ChartTooltip;
    const ChartTooltipContent = React.forwardRef(({ active, payload, className, indicator = "dot", hideLabel = false, hideIndicator = false, label, labelFormatter, labelClassName, formatter, color, nameKey, labelKey, }, ref) => {
        const { config } = useChart();
        const tooltipLabel = React.useMemo(() => {
            var _a;
            if (hideLabel || !(payload === null || payload === void 0 ? void 0 : payload.length)) {
                return null;
            }
            const [item] = payload;
            const key = `${labelKey || item.dataKey || item.name || "value"}`;
            const itemConfig = getPayloadConfigFromPayload(config, item, key);
            const value = !labelKey && typeof label === "string"
                ? ((_a = config[label]) === null || _a === void 0 ? void 0 : _a.label) || label
                : itemConfig === null || itemConfig === void 0 ? void 0 : itemConfig.label;
            if (labelFormatter) {
                return ((0, jsx_runtime_1.jsx)("div", { className: (0, utils_1.cn)("font-medium", labelClassName), children: labelFormatter(value, payload) }));
            }
            if (!value) {
                return null;
            }
            return (0, jsx_runtime_1.jsx)("div", { className: (0, utils_1.cn)("font-medium", labelClassName), children: value });
        }, [
            label,
            labelFormatter,
            payload,
            hideLabel,
            labelClassName,
            config,
            labelKey,
        ]);
        if (!active || !(payload === null || payload === void 0 ? void 0 : payload.length)) {
            return null;
        }
        const nestLabel = payload.length === 1 && indicator !== "dot";
        return ((0, jsx_runtime_1.jsxs)("div", { ref: ref, className: (0, utils_1.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl", className), children: [!nestLabel ? tooltipLabel : null, (0, jsx_runtime_1.jsx)("div", { className: "grid gap-1.5", children: payload.map((item, index) => {
                        const key = `${nameKey || item.name || item.dataKey || "value"}`;
                        const itemConfig = getPayloadConfigFromPayload(config, item, key);
                        const indicatorColor = color || item.payload.fill || item.color;
                        return ((0, jsx_runtime_1.jsx)("div", { className: (0, utils_1.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground", indicator === "dot" && "items-center"), children: formatter && (item === null || item === void 0 ? void 0 : item.value) !== undefined && item.name ? (formatter(item.value, item.name, item, index, item.payload)) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(itemConfig === null || itemConfig === void 0 ? void 0 : itemConfig.icon) ? ((0, jsx_runtime_1.jsx)(itemConfig.icon, {})) : (!hideIndicator && ((0, jsx_runtime_1.jsx)("div", { className: (0, utils_1.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]", {
                                            "h-2.5 w-2.5": indicator === "dot",
                                            "w-1": indicator === "line",
                                            "w-0 border-[1.5px] border-dashed bg-transparent": indicator === "dashed",
                                            "my-0.5": nestLabel && indicator === "dashed",
                                        }), style: {
                                            "--color-bg": indicatorColor,
                                            "--color-border": indicatorColor,
                                        } }))), (0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)("flex flex-1 justify-between leading-none", nestLabel ? "items-end" : "items-center"), children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid gap-1.5", children: [nestLabel ? tooltipLabel : null, (0, jsx_runtime_1.jsx)("span", { className: "text-muted-foreground", children: (itemConfig === null || itemConfig === void 0 ? void 0 : itemConfig.label) || item.name })] }), item.value && ((0, jsx_runtime_1.jsx)("span", { className: "font-mono font-medium tabular-nums text-foreground", children: item.value.toLocaleString() }))] })] })) }, item.dataKey));
                    }) })] }));
    });
    exports.ChartTooltipContent = ChartTooltipContent;
    ChartTooltipContent.displayName = "ChartTooltip";
    const ChartLegend = RechartsPrimitive.Legend;
    exports.ChartLegend = ChartLegend;
    const ChartLegendContent = React.forwardRef(({ className, hideIcon = false, payload, verticalAlign = "bottom", nameKey }, ref) => {
        const { config } = useChart();
        if (!(payload === null || payload === void 0 ? void 0 : payload.length)) {
            return null;
        }
        return ((0, jsx_runtime_1.jsx)("div", { ref: ref, className: (0, utils_1.cn)("flex items-center justify-center gap-4", verticalAlign === "top" ? "pb-3" : "pt-3", className), children: payload.map((item) => {
                const key = `${nameKey || item.dataKey || "value"}`;
                const itemConfig = getPayloadConfigFromPayload(config, item, key);
                return ((0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"), children: [(itemConfig === null || itemConfig === void 0 ? void 0 : itemConfig.icon) && !hideIcon ? ((0, jsx_runtime_1.jsx)(itemConfig.icon, {})) : ((0, jsx_runtime_1.jsx)("div", { className: "h-2 w-2 shrink-0 rounded-[2px]", style: {
                                backgroundColor: item.color,
                            } })), itemConfig === null || itemConfig === void 0 ? void 0 : itemConfig.label] }, item.value));
            }) }));
    });
    exports.ChartLegendContent = ChartLegendContent;
    ChartLegendContent.displayName = "ChartLegend";
    // Helper to extract item config from a payload.
    function getPayloadConfigFromPayload(config, payload, key) {
        if (typeof payload !== "object" || payload === null) {
            return undefined;
        }
        const payloadPayload = "payload" in payload &&
            typeof payload.payload === "object" &&
            payload.payload !== null
            ? payload.payload
            : undefined;
        let configLabelKey = key;
        if (key in payload &&
            typeof payload[key] === "string") {
            configLabelKey = payload[key];
        }
        else if (payloadPayload &&
            key in payloadPayload &&
            typeof payloadPayload[key] === "string") {
            configLabelKey = payloadPayload[key];
        }
        return configLabelKey in config
            ? config[configLabelKey]
            : config[key];
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy91aS9jaGFydC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtJQUFBLFlBQVksQ0FBQzs7OztJQU9iLHVDQUF1QztJQUN2QyxNQUFNLE1BQU0sR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBVyxDQUFDO0lBZ0JyRCxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsYUFBYSxDQUEyQixJQUFJLENBQUMsQ0FBQztJQUV6RSxTQUFTLFFBQVE7UUFDZixNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRS9DLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUMsQ0FBQztRQUN2RSxDQUFDO1FBRUQsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUVELE1BQU0sY0FBYyxHQUFHLEtBQUssQ0FBQyxVQUFVLENBUXJDLENBQUMsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUN2RCxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDL0IsTUFBTSxPQUFPLEdBQUcsU0FBUyxFQUFFLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUU1RCxPQUFPLENBQ0wsdUJBQUMsWUFBWSxDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsWUFDdEMsK0NBQ2MsT0FBTyxFQUNuQixHQUFHLEVBQUUsR0FBRyxFQUNSLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFDWCx1cEJBQXVwQixFQUN2cEIsU0FBUyxDQUNWLEtBQ0csS0FBSyxhQUVULHVCQUFDLFVBQVUsSUFBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUksRUFDM0MsdUJBQUMsaUJBQWlCLENBQUMsbUJBQW1CLGNBQ25DLFFBQVEsR0FDNkIsSUFDcEMsR0FDZ0IsQ0FDekIsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0lBb1NELHdDQUFjO0lBblNoQixjQUFjLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztJQUVyQyxNQUFNLFVBQVUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBdUMsRUFBRSxFQUFFO1FBQ3pFLE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUMvQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsS0FBSyxDQUM3QyxDQUFDO1FBRUYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUN4QixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxPQUFPLENBQ0wsa0NBQ0UsdUJBQXVCLEVBQUU7Z0JBQ3ZCLE1BQU0sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztxQkFDM0IsR0FBRyxDQUNGLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDO0VBQy9CLE1BQU0sZ0JBQWdCLEVBQUU7RUFDeEIsV0FBVztxQkFDVixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsRUFBRSxFQUFFOztvQkFDekIsTUFBTSxLQUFLLEdBQ1QsQ0FBQSxNQUFBLFVBQVUsQ0FBQyxLQUFLLDBDQUFHLEtBQXNDLENBQUM7d0JBQzFELFVBQVUsQ0FBQyxLQUFLLENBQUM7b0JBQ25CLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxhQUFhLEdBQUcsS0FBSyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUN0RCxDQUFDLENBQUM7cUJBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQzs7Q0FFWixDQUNVO3FCQUNBLElBQUksQ0FBQyxJQUFJLENBQUM7YUFDZCxHQUNELENBQ0gsQ0FBQztJQUNKLENBQUMsQ0FBQztJQXVRQSxnQ0FBVTtJQXJRWixNQUFNLFlBQVksR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLENBQUM7SUFpUTdDLG9DQUFZO0lBL1BkLE1BQU0sbUJBQW1CLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FXMUMsQ0FDRSxFQUNFLE1BQU0sRUFDTixPQUFPLEVBQ1AsU0FBUyxFQUNULFNBQVMsR0FBRyxLQUFLLEVBQ2pCLFNBQVMsR0FBRyxLQUFLLEVBQ2pCLGFBQWEsR0FBRyxLQUFLLEVBQ3JCLEtBQUssRUFDTCxjQUFjLEVBQ2QsY0FBYyxFQUNkLFNBQVMsRUFDVCxLQUFLLEVBQ0wsT0FBTyxFQUNQLFFBQVEsR0FDVCxFQUNELEdBQUcsRUFDSCxFQUFFO1FBQ0YsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLFFBQVEsRUFBRSxDQUFDO1FBRTlCLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFOztZQUN0QyxJQUFJLFNBQVMsSUFBSSxDQUFDLENBQUEsT0FBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLE1BQU0sQ0FBQSxFQUFFLENBQUM7Z0JBQ2xDLE9BQU8sSUFBSSxDQUFDO1lBQ2QsQ0FBQztZQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUM7WUFDdkIsTUFBTSxHQUFHLEdBQUcsR0FBRyxRQUFRLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLE9BQU8sRUFBRSxDQUFDO1lBQ2xFLE1BQU0sVUFBVSxHQUFHLDJCQUEyQixDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDbEUsTUFBTSxLQUFLLEdBQ1QsQ0FBQyxRQUFRLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUTtnQkFDcEMsQ0FBQyxDQUFDLENBQUEsTUFBQSxNQUFNLENBQUMsS0FBNEIsQ0FBQywwQ0FBRSxLQUFLLEtBQUksS0FBSztnQkFDdEQsQ0FBQyxDQUFDLFVBQVUsYUFBVixVQUFVLHVCQUFWLFVBQVUsQ0FBRSxLQUFLLENBQUM7WUFFeEIsSUFBSSxjQUFjLEVBQUUsQ0FBQztnQkFDbkIsT0FBTyxDQUNMLGdDQUFLLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFBQyxhQUFhLEVBQUUsY0FBYyxDQUFDLFlBQzlDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQzNCLENBQ1AsQ0FBQztZQUNKLENBQUM7WUFFRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ1gsT0FBTyxJQUFJLENBQUM7WUFDZCxDQUFDO1lBRUQsT0FBTyxnQ0FBSyxTQUFTLEVBQUUsSUFBQSxVQUFFLEVBQUMsYUFBYSxFQUFFLGNBQWMsQ0FBQyxZQUFHLEtBQUssR0FBTyxDQUFDO1FBQzFFLENBQUMsRUFBRTtZQUNELEtBQUs7WUFDTCxjQUFjO1lBQ2QsT0FBTztZQUNQLFNBQVM7WUFDVCxjQUFjO1lBQ2QsTUFBTTtZQUNOLFFBQVE7U0FDVCxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsTUFBTSxDQUFBLEVBQUUsQ0FBQztZQUNoQyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxTQUFTLEtBQUssS0FBSyxDQUFDO1FBRTlELE9BQU8sQ0FDTCxpQ0FDRSxHQUFHLEVBQUUsR0FBRyxFQUNSLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFDWCx3SEFBd0gsRUFDeEgsU0FBUyxDQUNWLGFBRUEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUNqQyxnQ0FBSyxTQUFTLEVBQUMsY0FBYyxZQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFO3dCQUMzQixNQUFNLEdBQUcsR0FBRyxHQUFHLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxFQUFFLENBQUM7d0JBQ2pFLE1BQU0sVUFBVSxHQUFHLDJCQUEyQixDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7d0JBQ2xFLE1BQU0sY0FBYyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDO3dCQUVoRSxPQUFPLENBQ0wsZ0NBRUUsU0FBUyxFQUFFLElBQUEsVUFBRSxFQUNYLHFHQUFxRyxFQUNyRyxTQUFTLEtBQUssS0FBSyxJQUFJLGNBQWMsQ0FDdEMsWUFFQSxTQUFTLElBQUksQ0FBQSxJQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsS0FBSyxNQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNyRCxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUM1RCxDQUFDLENBQUMsQ0FBQyxDQUNGLDZEQUNHLENBQUEsVUFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLElBQUksRUFBQyxDQUFDLENBQUMsQ0FDbEIsdUJBQUMsVUFBVSxDQUFDLElBQUksS0FBRyxDQUNwQixDQUFDLENBQUMsQ0FBQyxDQUNGLENBQUMsYUFBYSxJQUFJLENBQ2hCLGdDQUNFLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFDWCxnRUFBZ0UsRUFDaEU7NENBQ0UsYUFBYSxFQUFFLFNBQVMsS0FBSyxLQUFLOzRDQUNsQyxLQUFLLEVBQUUsU0FBUyxLQUFLLE1BQU07NENBQzNCLGlEQUFpRCxFQUMvQyxTQUFTLEtBQUssUUFBUTs0Q0FDeEIsUUFBUSxFQUFFLFNBQVMsSUFBSSxTQUFTLEtBQUssUUFBUTt5Q0FDOUMsQ0FDRixFQUNELEtBQUssRUFDSDs0Q0FDRSxZQUFZLEVBQUUsY0FBYzs0Q0FDNUIsZ0JBQWdCLEVBQUUsY0FBYzt5Q0FDVixHQUUxQixDQUNILENBQ0YsRUFDRCxpQ0FDRSxTQUFTLEVBQUUsSUFBQSxVQUFFLEVBQ1gsMENBQTBDLEVBQzFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQ3pDLGFBRUQsaUNBQUssU0FBUyxFQUFDLGNBQWMsYUFDMUIsU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksRUFDaEMsaUNBQU0sU0FBUyxFQUFDLHVCQUF1QixZQUNwQyxDQUFBLFVBQVUsYUFBVixVQUFVLHVCQUFWLFVBQVUsQ0FBRSxLQUFLLEtBQUksSUFBSSxDQUFDLElBQUksR0FDMUIsSUFDSCxFQUNMLElBQUksQ0FBQyxLQUFLLElBQUksQ0FDYixpQ0FBTSxTQUFTLEVBQUMsb0RBQW9ELFlBQ2pFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLEdBQ3ZCLENBQ1IsSUFDRyxJQUNMLENBQ0osSUFyREksSUFBSSxDQUFDLE9BQU8sQ0FzRGIsQ0FDUCxDQUFDO29CQUNKLENBQUMsQ0FBQyxHQUNFLElBQ0YsQ0FDUCxDQUFDO0lBQ0osQ0FBQyxDQUNGLENBQUM7SUF5R0Esa0RBQW1CO0lBeEdyQixtQkFBbUIsQ0FBQyxXQUFXLEdBQUcsY0FBYyxDQUFDO0lBRWpELE1BQU0sV0FBVyxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQztJQXVHM0Msa0NBQVc7SUFyR2IsTUFBTSxrQkFBa0IsR0FBRyxLQUFLLENBQUMsVUFBVSxDQVF6QyxDQUNFLEVBQUUsU0FBUyxFQUFFLFFBQVEsR0FBRyxLQUFLLEVBQUUsT0FBTyxFQUFFLGFBQWEsR0FBRyxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQzNFLEdBQUcsRUFDSCxFQUFFO1FBQ0YsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLFFBQVEsRUFBRSxDQUFDO1FBRTlCLElBQUksQ0FBQyxDQUFBLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxNQUFNLENBQUEsRUFBRSxDQUFDO1lBQ3JCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELE9BQU8sQ0FDTCxnQ0FDRSxHQUFHLEVBQUUsR0FBRyxFQUNSLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFDWCx3Q0FBd0MsRUFDeEMsYUFBYSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQ3pDLFNBQVMsQ0FDVixZQUVBLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDcEIsTUFBTSxHQUFHLEdBQUcsR0FBRyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxPQUFPLEVBQUUsQ0FBQztnQkFDcEQsTUFBTSxVQUFVLEdBQUcsMkJBQTJCLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFFbEUsT0FBTyxDQUNMLGlDQUVFLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFDWCxpRkFBaUYsQ0FDbEYsYUFFQSxDQUFBLFVBQVUsYUFBVixVQUFVLHVCQUFWLFVBQVUsQ0FBRSxJQUFJLEtBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQy9CLHVCQUFDLFVBQVUsQ0FBQyxJQUFJLEtBQUcsQ0FDcEIsQ0FBQyxDQUFDLENBQUMsQ0FDRixnQ0FDRSxTQUFTLEVBQUMsZ0NBQWdDLEVBQzFDLEtBQUssRUFBRTtnQ0FDTCxlQUFlLEVBQUUsSUFBSSxDQUFDLEtBQUs7NkJBQzVCLEdBQ0QsQ0FDSCxFQUNBLFVBQVUsYUFBVixVQUFVLHVCQUFWLFVBQVUsQ0FBRSxLQUFLLEtBZmIsSUFBSSxDQUFDLEtBQUssQ0FnQlgsQ0FDUCxDQUFDO1lBQ0osQ0FBQyxDQUFDLEdBQ0UsQ0FDUCxDQUFDO0lBQ0osQ0FBQyxDQUNGLENBQUM7SUErQ0EsZ0RBQWtCO0lBOUNwQixrQkFBa0IsQ0FBQyxXQUFXLEdBQUcsYUFBYSxDQUFDO0lBRS9DLGdEQUFnRDtJQUNoRCxTQUFTLDJCQUEyQixDQUNsQyxNQUFtQixFQUNuQixPQUFnQixFQUNoQixHQUFXO1FBRVgsSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLElBQUksT0FBTyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ3BELE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRCxNQUFNLGNBQWMsR0FDbEIsU0FBUyxJQUFJLE9BQU87WUFDcEIsT0FBTyxPQUFPLENBQUMsT0FBTyxLQUFLLFFBQVE7WUFDbkMsT0FBTyxDQUFDLE9BQU8sS0FBSyxJQUFJO1lBQ3RCLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTztZQUNqQixDQUFDLENBQUMsU0FBUyxDQUFDO1FBRWhCLElBQUksY0FBYyxHQUFXLEdBQUcsQ0FBQztRQUVqQyxJQUNFLEdBQUcsSUFBSSxPQUFPO1lBQ2QsT0FBTyxPQUFPLENBQUMsR0FBMkIsQ0FBQyxLQUFLLFFBQVEsRUFDeEQsQ0FBQztZQUNELGNBQWMsR0FBRyxPQUFPLENBQUMsR0FBMkIsQ0FBVyxDQUFDO1FBQ2xFLENBQUM7YUFBTSxJQUNMLGNBQWM7WUFDZCxHQUFHLElBQUksY0FBYztZQUNyQixPQUFPLGNBQWMsQ0FBQyxHQUFrQyxDQUFDLEtBQUssUUFBUSxFQUN0RSxDQUFDO1lBQ0QsY0FBYyxHQUFHLGNBQWMsQ0FDN0IsR0FBa0MsQ0FDekIsQ0FBQztRQUNkLENBQUM7UUFFRCxPQUFPLGNBQWMsSUFBSSxNQUFNO1lBQzdCLENBQUMsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDO1lBQ3hCLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBMEIsQ0FBQyxDQUFDO0lBQ3pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWNoYXJ0c1ByaW1pdGl2ZSBmcm9tIFwicmVjaGFydHNcIjtcblxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcblxuLy8gRm9ybWF0OiB7IFRIRU1FX05BTUU6IENTU19TRUxFQ1RPUiB9XG5jb25zdCBUSEVNRVMgPSB7IGxpZ2h0OiBcIlwiLCBkYXJrOiBcIi5kYXJrXCIgfSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgQ2hhcnRDb25maWcgPSB7XG4gIFtrIGluIHN0cmluZ106IHtcbiAgICBsYWJlbD86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgICBpY29uPzogUmVhY3QuQ29tcG9uZW50VHlwZTtcbiAgfSAmIChcbiAgICB8IHsgY29sb3I/OiBzdHJpbmc7IHRoZW1lPzogbmV2ZXIgfVxuICAgIHwgeyBjb2xvcj86IG5ldmVyOyB0aGVtZTogUmVjb3JkPGtleW9mIHR5cGVvZiBUSEVNRVMsIHN0cmluZz4gfVxuICApO1xufTtcblxudHlwZSBDaGFydENvbnRleHRQcm9wcyA9IHtcbiAgY29uZmlnOiBDaGFydENvbmZpZztcbn07XG5cbmNvbnN0IENoYXJ0Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8Q2hhcnRDb250ZXh0UHJvcHMgfCBudWxsPihudWxsKTtcblxuZnVuY3Rpb24gdXNlQ2hhcnQoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KENoYXJ0Q29udGV4dCk7XG5cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlQ2hhcnQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIDxDaGFydENvbnRhaW5lciAvPlwiKTtcbiAgfVxuXG4gIHJldHVybiBjb250ZXh0O1xufVxuXG5jb25zdCBDaGFydENvbnRhaW5lciA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxEaXZFbGVtZW50LFxuICBSZWFjdC5Db21wb25lbnRQcm9wczxcImRpdlwiPiAmIHtcbiAgICBjb25maWc6IENoYXJ0Q29uZmlnO1xuICAgIGNoaWxkcmVuOiBSZWFjdC5Db21wb25lbnRQcm9wczxcbiAgICAgIHR5cGVvZiBSZWNoYXJ0c1ByaW1pdGl2ZS5SZXNwb25zaXZlQ29udGFpbmVyXG4gICAgPltcImNoaWxkcmVuXCJdO1xuICB9XG4+KCh7IGlkLCBjbGFzc05hbWUsIGNoaWxkcmVuLCBjb25maWcsIC4uLnByb3BzIH0sIHJlZikgPT4ge1xuICBjb25zdCB1bmlxdWVJZCA9IFJlYWN0LnVzZUlkKCk7XG4gIGNvbnN0IGNoYXJ0SWQgPSBgY2hhcnQtJHtpZCB8fCB1bmlxdWVJZC5yZXBsYWNlKC86L2csIFwiXCIpfWA7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhcnRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IGNvbmZpZyB9fT5cbiAgICAgIDxkaXZcbiAgICAgICAgZGF0YS1jaGFydD17Y2hhcnRJZH1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgXCJmbGV4IGFzcGVjdC12aWRlbyBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIFsmXy5yZWNoYXJ0cy1jYXJ0ZXNpYW4tYXhpcy10aWNrX3RleHRdOmZpbGwtbXV0ZWQtZm9yZWdyb3VuZCBbJl8ucmVjaGFydHMtY2FydGVzaWFuLWdyaWRfbGluZVtzdHJva2U9JyNjY2MnXV06c3Ryb2tlLWJvcmRlci81MCBbJl8ucmVjaGFydHMtY3VydmUucmVjaGFydHMtdG9vbHRpcC1jdXJzb3JdOnN0cm9rZS1ib3JkZXIgWyZfLnJlY2hhcnRzLWRvdFtzdHJva2U9JyNmZmYnXV06c3Ryb2tlLXRyYW5zcGFyZW50IFsmXy5yZWNoYXJ0cy1sYXllcl06b3V0bGluZS1ub25lIFsmXy5yZWNoYXJ0cy1wb2xhci1ncmlkX1tzdHJva2U9JyNjY2MnXV06c3Ryb2tlLWJvcmRlciBbJl8ucmVjaGFydHMtcmFkaWFsLWJhci1iYWNrZ3JvdW5kLXNlY3Rvcl06ZmlsbC1tdXRlZCBbJl8ucmVjaGFydHMtcmVjdGFuZ2xlLnJlY2hhcnRzLXRvb2x0aXAtY3Vyc29yXTpmaWxsLW11dGVkIFsmXy5yZWNoYXJ0cy1yZWZlcmVuY2UtbGluZV9bc3Ryb2tlPScjY2NjJ11dOnN0cm9rZS1ib3JkZXIgWyZfLnJlY2hhcnRzLXNlY3RvcltzdHJva2U9JyNmZmYnXV06c3Ryb2tlLXRyYW5zcGFyZW50IFsmXy5yZWNoYXJ0cy1zZWN0b3JdOm91dGxpbmUtbm9uZSBbJl8ucmVjaGFydHMtc3VyZmFjZV06b3V0bGluZS1ub25lXCIsXG4gICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICApfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIDxDaGFydFN0eWxlIGlkPXtjaGFydElkfSBjb25maWc9e2NvbmZpZ30gLz5cbiAgICAgICAgPFJlY2hhcnRzUHJpbWl0aXZlLlJlc3BvbnNpdmVDb250YWluZXI+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L1JlY2hhcnRzUHJpbWl0aXZlLlJlc3BvbnNpdmVDb250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICA8L0NoYXJ0Q29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn0pO1xuQ2hhcnRDb250YWluZXIuZGlzcGxheU5hbWUgPSBcIkNoYXJ0XCI7XG5cbmNvbnN0IENoYXJ0U3R5bGUgPSAoeyBpZCwgY29uZmlnIH06IHsgaWQ6IHN0cmluZzsgY29uZmlnOiBDaGFydENvbmZpZyB9KSA9PiB7XG4gIGNvbnN0IGNvbG9yQ29uZmlnID0gT2JqZWN0LmVudHJpZXMoY29uZmlnKS5maWx0ZXIoXG4gICAgKFssIGNvbmZpZ10pID0+IGNvbmZpZy50aGVtZSB8fCBjb25maWcuY29sb3IsXG4gICk7XG5cbiAgaWYgKCFjb2xvckNvbmZpZy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPHN0eWxlXG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICBfX2h0bWw6IE9iamVjdC5lbnRyaWVzKFRIRU1FUylcbiAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgKFt0aGVtZSwgcHJlZml4XSkgPT4gYFxuJHtwcmVmaXh9IFtkYXRhLWNoYXJ0PSR7aWR9XSB7XG4ke2NvbG9yQ29uZmlnXG4gIC5tYXAoKFtrZXksIGl0ZW1Db25maWddKSA9PiB7XG4gICAgY29uc3QgY29sb3IgPVxuICAgICAgaXRlbUNvbmZpZy50aGVtZT8uW3RoZW1lIGFzIGtleW9mIHR5cGVvZiBpdGVtQ29uZmlnLnRoZW1lXSB8fFxuICAgICAgaXRlbUNvbmZpZy5jb2xvcjtcbiAgICByZXR1cm4gY29sb3IgPyBgICAtLWNvbG9yLSR7a2V5fTogJHtjb2xvcn07YCA6IG51bGw7XG4gIH0pXG4gIC5qb2luKFwiXFxuXCIpfVxufVxuYCxcbiAgICAgICAgICApXG4gICAgICAgICAgLmpvaW4oXCJcXG5cIiksXG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59O1xuXG5jb25zdCBDaGFydFRvb2x0aXAgPSBSZWNoYXJ0c1ByaW1pdGl2ZS5Ub29sdGlwO1xuXG5jb25zdCBDaGFydFRvb2x0aXBDb250ZW50ID0gUmVhY3QuZm9yd2FyZFJlZjxcbiAgSFRNTERpdkVsZW1lbnQsXG4gIFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBSZWNoYXJ0c1ByaW1pdGl2ZS5Ub29sdGlwPiAmXG4gICAgUmVhY3QuQ29tcG9uZW50UHJvcHM8XCJkaXZcIj4gJiB7XG4gICAgICBoaWRlTGFiZWw/OiBib29sZWFuO1xuICAgICAgaGlkZUluZGljYXRvcj86IGJvb2xlYW47XG4gICAgICBpbmRpY2F0b3I/OiBcImxpbmVcIiB8IFwiZG90XCIgfCBcImRhc2hlZFwiO1xuICAgICAgbmFtZUtleT86IHN0cmluZztcbiAgICAgIGxhYmVsS2V5Pzogc3RyaW5nO1xuICAgIH1cbj4oXG4gIChcbiAgICB7XG4gICAgICBhY3RpdmUsXG4gICAgICBwYXlsb2FkLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgaW5kaWNhdG9yID0gXCJkb3RcIixcbiAgICAgIGhpZGVMYWJlbCA9IGZhbHNlLFxuICAgICAgaGlkZUluZGljYXRvciA9IGZhbHNlLFxuICAgICAgbGFiZWwsXG4gICAgICBsYWJlbEZvcm1hdHRlcixcbiAgICAgIGxhYmVsQ2xhc3NOYW1lLFxuICAgICAgZm9ybWF0dGVyLFxuICAgICAgY29sb3IsXG4gICAgICBuYW1lS2V5LFxuICAgICAgbGFiZWxLZXksXG4gICAgfSxcbiAgICByZWYsXG4gICkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB1c2VDaGFydCgpO1xuXG4gICAgY29uc3QgdG9vbHRpcExhYmVsID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAoaGlkZUxhYmVsIHx8ICFwYXlsb2FkPy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtpdGVtXSA9IHBheWxvYWQ7XG4gICAgICBjb25zdCBrZXkgPSBgJHtsYWJlbEtleSB8fCBpdGVtLmRhdGFLZXkgfHwgaXRlbS5uYW1lIHx8IFwidmFsdWVcIn1gO1xuICAgICAgY29uc3QgaXRlbUNvbmZpZyA9IGdldFBheWxvYWRDb25maWdGcm9tUGF5bG9hZChjb25maWcsIGl0ZW0sIGtleSk7XG4gICAgICBjb25zdCB2YWx1ZSA9XG4gICAgICAgICFsYWJlbEtleSAmJiB0eXBlb2YgbGFiZWwgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICA/IGNvbmZpZ1tsYWJlbCBhcyBrZXlvZiB0eXBlb2YgY29uZmlnXT8ubGFiZWwgfHwgbGFiZWxcbiAgICAgICAgICA6IGl0ZW1Db25maWc/LmxhYmVsO1xuXG4gICAgICBpZiAobGFiZWxGb3JtYXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXCJmb250LW1lZGl1bVwiLCBsYWJlbENsYXNzTmFtZSl9PlxuICAgICAgICAgICAge2xhYmVsRm9ybWF0dGVyKHZhbHVlLCBwYXlsb2FkKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbihcImZvbnQtbWVkaXVtXCIsIGxhYmVsQ2xhc3NOYW1lKX0+e3ZhbHVlfTwvZGl2PjtcbiAgICB9LCBbXG4gICAgICBsYWJlbCxcbiAgICAgIGxhYmVsRm9ybWF0dGVyLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIGhpZGVMYWJlbCxcbiAgICAgIGxhYmVsQ2xhc3NOYW1lLFxuICAgICAgY29uZmlnLFxuICAgICAgbGFiZWxLZXksXG4gICAgXSk7XG5cbiAgICBpZiAoIWFjdGl2ZSB8fCAhcGF5bG9hZD8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBuZXN0TGFiZWwgPSBwYXlsb2FkLmxlbmd0aCA9PT0gMSAmJiBpbmRpY2F0b3IgIT09IFwiZG90XCI7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICBcImdyaWQgbWluLXctWzhyZW1dIGl0ZW1zLXN0YXJ0IGdhcC0xLjUgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci81MCBiZy1iYWNrZ3JvdW5kIHB4LTIuNSBweS0xLjUgdGV4dC14cyBzaGFkb3cteGxcIixcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIHshbmVzdExhYmVsID8gdG9vbHRpcExhYmVsIDogbnVsbH1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC0xLjVcIj5cbiAgICAgICAgICB7cGF5bG9hZC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtuYW1lS2V5IHx8IGl0ZW0ubmFtZSB8fCBpdGVtLmRhdGFLZXkgfHwgXCJ2YWx1ZVwifWA7XG4gICAgICAgICAgICBjb25zdCBpdGVtQ29uZmlnID0gZ2V0UGF5bG9hZENvbmZpZ0Zyb21QYXlsb2FkKGNvbmZpZywgaXRlbSwga2V5KTtcbiAgICAgICAgICAgIGNvbnN0IGluZGljYXRvckNvbG9yID0gY29sb3IgfHwgaXRlbS5wYXlsb2FkLmZpbGwgfHwgaXRlbS5jb2xvcjtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17aXRlbS5kYXRhS2V5fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICBcImZsZXggdy1mdWxsIGZsZXgtd3JhcCBpdGVtcy1zdHJldGNoIGdhcC0yIFsmPnN2Z106aC0yLjUgWyY+c3ZnXTp3LTIuNSBbJj5zdmddOnRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yID09PSBcImRvdFwiICYmIFwiaXRlbXMtY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtmb3JtYXR0ZXIgJiYgaXRlbT8udmFsdWUgIT09IHVuZGVmaW5lZCAmJiBpdGVtLm5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICBmb3JtYXR0ZXIoaXRlbS52YWx1ZSwgaXRlbS5uYW1lLCBpdGVtLCBpbmRleCwgaXRlbS5wYXlsb2FkKVxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICB7aXRlbUNvbmZpZz8uaWNvbiA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8aXRlbUNvbmZpZy5pY29uIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgIWhpZGVJbmRpY2F0b3IgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hyaW5rLTAgcm91bmRlZC1bMnB4XSBib3JkZXItWy0tY29sb3ItYm9yZGVyXSBiZy1bLS1jb2xvci1iZ11cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImgtMi41IHctMi41XCI6IGluZGljYXRvciA9PT0gXCJkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidy0xXCI6IGluZGljYXRvciA9PT0gXCJsaW5lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInctMCBib3JkZXItWzEuNXB4XSBib3JkZXItZGFzaGVkIGJnLXRyYW5zcGFyZW50XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvciA9PT0gXCJkYXNoZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibXktMC41XCI6IG5lc3RMYWJlbCAmJiBpbmRpY2F0b3IgPT09IFwiZGFzaGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLS1jb2xvci1iZ1wiOiBpbmRpY2F0b3JDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLS1jb2xvci1ib3JkZXJcIjogaW5kaWNhdG9yQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmxleCBmbGV4LTEganVzdGlmeS1iZXR3ZWVuIGxlYWRpbmctbm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVzdExhYmVsID8gXCJpdGVtcy1lbmRcIiA6IFwiaXRlbXMtY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMS41XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bmVzdExhYmVsID8gdG9vbHRpcExhYmVsIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbUNvbmZpZz8ubGFiZWwgfHwgaXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnZhbHVlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtbW9ubyBmb250LW1lZGl1bSB0YWJ1bGFyLW51bXMgdGV4dC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnZhbHVlLnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbik7XG5DaGFydFRvb2x0aXBDb250ZW50LmRpc3BsYXlOYW1lID0gXCJDaGFydFRvb2x0aXBcIjtcblxuY29uc3QgQ2hhcnRMZWdlbmQgPSBSZWNoYXJ0c1ByaW1pdGl2ZS5MZWdlbmQ7XG5cbmNvbnN0IENoYXJ0TGVnZW5kQ29udGVudCA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxEaXZFbGVtZW50LFxuICBSZWFjdC5Db21wb25lbnRQcm9wczxcImRpdlwiPiAmXG4gICAgUGljazxSZWNoYXJ0c1ByaW1pdGl2ZS5MZWdlbmRQcm9wcywgXCJwYXlsb2FkXCIgfCBcInZlcnRpY2FsQWxpZ25cIj4gJiB7XG4gICAgICBoaWRlSWNvbj86IGJvb2xlYW47XG4gICAgICBuYW1lS2V5Pzogc3RyaW5nO1xuICAgIH1cbj4oXG4gIChcbiAgICB7IGNsYXNzTmFtZSwgaGlkZUljb24gPSBmYWxzZSwgcGF5bG9hZCwgdmVydGljYWxBbGlnbiA9IFwiYm90dG9tXCIsIG5hbWVLZXkgfSxcbiAgICByZWYsXG4gICkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB1c2VDaGFydCgpO1xuXG4gICAgaWYgKCFwYXlsb2FkPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgIFwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTRcIixcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduID09PSBcInRvcFwiID8gXCJwYi0zXCIgOiBcInB0LTNcIixcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIHtwYXlsb2FkLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGtleSA9IGAke25hbWVLZXkgfHwgaXRlbS5kYXRhS2V5IHx8IFwidmFsdWVcIn1gO1xuICAgICAgICAgIGNvbnN0IGl0ZW1Db25maWcgPSBnZXRQYXlsb2FkQ29uZmlnRnJvbVBheWxvYWQoY29uZmlnLCBpdGVtLCBrZXkpO1xuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAga2V5PXtpdGVtLnZhbHVlfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgIFwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSBbJj5zdmddOmgtMyBbJj5zdmddOnctMyBbJj5zdmddOnRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aXRlbUNvbmZpZz8uaWNvbiAmJiAhaGlkZUljb24gPyAoXG4gICAgICAgICAgICAgICAgPGl0ZW1Db25maWcuaWNvbiAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMiB3LTIgc2hyaW5rLTAgcm91bmRlZC1bMnB4XVwiXG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGl0ZW0uY29sb3IsXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtpdGVtQ29uZmlnPy5sYWJlbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbik7XG5DaGFydExlZ2VuZENvbnRlbnQuZGlzcGxheU5hbWUgPSBcIkNoYXJ0TGVnZW5kXCI7XG5cbi8vIEhlbHBlciB0byBleHRyYWN0IGl0ZW0gY29uZmlnIGZyb20gYSBwYXlsb2FkLlxuZnVuY3Rpb24gZ2V0UGF5bG9hZENvbmZpZ0Zyb21QYXlsb2FkKFxuICBjb25maWc6IENoYXJ0Q29uZmlnLFxuICBwYXlsb2FkOiB1bmtub3duLFxuICBrZXk6IHN0cmluZyxcbikge1xuICBpZiAodHlwZW9mIHBheWxvYWQgIT09IFwib2JqZWN0XCIgfHwgcGF5bG9hZCA9PT0gbnVsbCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBwYXlsb2FkUGF5bG9hZCA9XG4gICAgXCJwYXlsb2FkXCIgaW4gcGF5bG9hZCAmJlxuICAgIHR5cGVvZiBwYXlsb2FkLnBheWxvYWQgPT09IFwib2JqZWN0XCIgJiZcbiAgICBwYXlsb2FkLnBheWxvYWQgIT09IG51bGxcbiAgICAgID8gcGF5bG9hZC5wYXlsb2FkXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICBsZXQgY29uZmlnTGFiZWxLZXk6IHN0cmluZyA9IGtleTtcblxuICBpZiAoXG4gICAga2V5IGluIHBheWxvYWQgJiZcbiAgICB0eXBlb2YgcGF5bG9hZFtrZXkgYXMga2V5b2YgdHlwZW9mIHBheWxvYWRdID09PSBcInN0cmluZ1wiXG4gICkge1xuICAgIGNvbmZpZ0xhYmVsS2V5ID0gcGF5bG9hZFtrZXkgYXMga2V5b2YgdHlwZW9mIHBheWxvYWRdIGFzIHN0cmluZztcbiAgfSBlbHNlIGlmIChcbiAgICBwYXlsb2FkUGF5bG9hZCAmJlxuICAgIGtleSBpbiBwYXlsb2FkUGF5bG9hZCAmJlxuICAgIHR5cGVvZiBwYXlsb2FkUGF5bG9hZFtrZXkgYXMga2V5b2YgdHlwZW9mIHBheWxvYWRQYXlsb2FkXSA9PT0gXCJzdHJpbmdcIlxuICApIHtcbiAgICBjb25maWdMYWJlbEtleSA9IHBheWxvYWRQYXlsb2FkW1xuICAgICAga2V5IGFzIGtleW9mIHR5cGVvZiBwYXlsb2FkUGF5bG9hZFxuICAgIF0gYXMgc3RyaW5nO1xuICB9XG5cbiAgcmV0dXJuIGNvbmZpZ0xhYmVsS2V5IGluIGNvbmZpZ1xuICAgID8gY29uZmlnW2NvbmZpZ0xhYmVsS2V5XVxuICAgIDogY29uZmlnW2tleSBhcyBrZXlvZiB0eXBlb2YgY29uZmlnXTtcbn1cblxuZXhwb3J0IHtcbiAgQ2hhcnRDb250YWluZXIsXG4gIENoYXJ0VG9vbHRpcCxcbiAgQ2hhcnRUb29sdGlwQ29udGVudCxcbiAgQ2hhcnRMZWdlbmQsXG4gIENoYXJ0TGVnZW5kQ29udGVudCxcbiAgQ2hhcnRTdHlsZSxcbn07XG4iXX0=