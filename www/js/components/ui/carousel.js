define(["require", "exports", "react/jsx-runtime", "react", "embla-carousel-react", "lucide-react", "@/lib/utils", "@/components/ui/button"], function (require, exports, jsx_runtime_1, React, embla_carousel_react_1, lucide_react_1, utils_1, button_1) {
    "use client";
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CarouselNext = exports.CarouselPrevious = exports.CarouselItem = exports.CarouselContent = exports.Carousel = void 0;
    const CarouselContext = React.createContext(null);
    function useCarousel() {
        const context = React.useContext(CarouselContext);
        if (!context) {
            throw new Error("useCarousel must be used within a <Carousel />");
        }
        return context;
    }
    const Carousel = React.forwardRef(({ orientation = "horizontal", opts, setApi, plugins, className, children, ...props }, ref) => {
        const [carouselRef, api] = (0, embla_carousel_react_1.default)({
            ...opts,
            axis: orientation === "horizontal" ? "x" : "y",
        }, plugins);
        const [canScrollPrev, setCanScrollPrev] = React.useState(false);
        const [canScrollNext, setCanScrollNext] = React.useState(false);
        const onSelect = React.useCallback((api) => {
            if (!api) {
                return;
            }
            setCanScrollPrev(api.canScrollPrev());
            setCanScrollNext(api.canScrollNext());
        }, []);
        const scrollPrev = React.useCallback(() => {
            api === null || api === void 0 ? void 0 : api.scrollPrev();
        }, [api]);
        const scrollNext = React.useCallback(() => {
            api === null || api === void 0 ? void 0 : api.scrollNext();
        }, [api]);
        const handleKeyDown = React.useCallback((event) => {
            if (event.key === "ArrowLeft") {
                event.preventDefault();
                scrollPrev();
            }
            else if (event.key === "ArrowRight") {
                event.preventDefault();
                scrollNext();
            }
        }, [scrollPrev, scrollNext]);
        React.useEffect(() => {
            if (!api || !setApi) {
                return;
            }
            setApi(api);
        }, [api, setApi]);
        React.useEffect(() => {
            if (!api) {
                return;
            }
            onSelect(api);
            api.on("reInit", onSelect);
            api.on("select", onSelect);
            return () => {
                api === null || api === void 0 ? void 0 : api.off("select", onSelect);
            };
        }, [api, onSelect]);
        return ((0, jsx_runtime_1.jsx)(CarouselContext.Provider, { value: {
                carouselRef,
                api: api,
                opts,
                orientation: orientation || ((opts === null || opts === void 0 ? void 0 : opts.axis) === "y" ? "vertical" : "horizontal"),
                scrollPrev,
                scrollNext,
                canScrollPrev,
                canScrollNext,
            }, children: (0, jsx_runtime_1.jsx)("div", { ref: ref, onKeyDownCapture: handleKeyDown, className: (0, utils_1.cn)("relative", className), role: "region", "aria-roledescription": "carousel", ...props, children: children }) }));
    });
    exports.Carousel = Carousel;
    Carousel.displayName = "Carousel";
    const CarouselContent = React.forwardRef(({ className, ...props }, ref) => {
        const { carouselRef, orientation } = useCarousel();
        return ((0, jsx_runtime_1.jsx)("div", { ref: carouselRef, className: "overflow-hidden", children: (0, jsx_runtime_1.jsx)("div", { ref: ref, className: (0, utils_1.cn)("flex", orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col", className), ...props }) }));
    });
    exports.CarouselContent = CarouselContent;
    CarouselContent.displayName = "CarouselContent";
    const CarouselItem = React.forwardRef(({ className, ...props }, ref) => {
        const { orientation } = useCarousel();
        return ((0, jsx_runtime_1.jsx)("div", { ref: ref, role: "group", "aria-roledescription": "slide", className: (0, utils_1.cn)("min-w-0 shrink-0 grow-0 basis-full", orientation === "horizontal" ? "pl-4" : "pt-4", className), ...props }));
    });
    exports.CarouselItem = CarouselItem;
    CarouselItem.displayName = "CarouselItem";
    const CarouselPrevious = React.forwardRef(({ className, variant = "outline", size = "icon", ...props }, ref) => {
        const { orientation, scrollPrev, canScrollPrev } = useCarousel();
        return ((0, jsx_runtime_1.jsxs)(button_1.Button, { ref: ref, variant: variant, size: size, className: (0, utils_1.cn)("absolute  h-8 w-8 rounded-full", orientation === "horizontal"
                ? "-left-12 top-1/2 -translate-y-1/2"
                : "-top-12 left-1/2 -translate-x-1/2 rotate-90", className), disabled: !canScrollPrev, onClick: scrollPrev, ...props, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "h-4 w-4" }), (0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: "Previous slide" })] }));
    });
    exports.CarouselPrevious = CarouselPrevious;
    CarouselPrevious.displayName = "CarouselPrevious";
    const CarouselNext = React.forwardRef(({ className, variant = "outline", size = "icon", ...props }, ref) => {
        const { orientation, scrollNext, canScrollNext } = useCarousel();
        return ((0, jsx_runtime_1.jsxs)(button_1.Button, { ref: ref, variant: variant, size: size, className: (0, utils_1.cn)("absolute h-8 w-8 rounded-full", orientation === "horizontal"
                ? "-right-12 top-1/2 -translate-y-1/2"
                : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90", className), disabled: !canScrollNext, onClick: scrollNext, ...props, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowRight, { className: "h-4 w-4" }), (0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: "Next slide" })] }));
    });
    exports.CarouselNext = CarouselNext;
    CarouselNext.displayName = "CarouselNext";
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2Fyb3VzZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy91aS9jYXJvdXNlbC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtJQUFBLFlBQVksQ0FBQzs7OztJQWdDYixNQUFNLGVBQWUsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUE4QixJQUFJLENBQUMsQ0FBQztJQUUvRSxTQUFTLFdBQVc7UUFDbEIsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUVsRCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDYixNQUFNLElBQUksS0FBSyxDQUFDLGdEQUFnRCxDQUFDLENBQUM7UUFDcEUsQ0FBQztRQUVELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUkvQixDQUNFLEVBQ0UsV0FBVyxHQUFHLFlBQVksRUFDMUIsSUFBSSxFQUNKLE1BQU0sRUFDTixPQUFPLEVBQ1AsU0FBUyxFQUNULFFBQVEsRUFDUixHQUFHLEtBQUssRUFDVCxFQUNELEdBQUcsRUFDSCxFQUFFO1FBQ0YsTUFBTSxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsR0FBRyxJQUFBLDhCQUFnQixFQUN6QztZQUNFLEdBQUcsSUFBSTtZQUNQLElBQUksRUFBRSxXQUFXLEtBQUssWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUc7U0FDL0MsRUFDRCxPQUFPLENBQ1IsQ0FBQztRQUNGLE1BQU0sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRWhFLE1BQU0sUUFBUSxHQUFHLEtBQUss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LEdBQUcsV0FBVyxFQUFFLENBQUM7UUFFakUsT0FBTyxDQUNMLHdCQUFDLGVBQU0sSUFDTCxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxPQUFPLEVBQ2hCLElBQUksRUFBRSxJQUFJLEVBQ1YsU0FBUyxFQUFFLElBQUEsVUFBRSxFQUNYLCtCQUErQixFQUMvQixXQUFXLEtBQUssWUFBWTtnQkFDMUIsQ0FBQyxDQUFDLG9DQUFvQztnQkFDdEMsQ0FBQyxDQUFDLGdEQUFnRCxFQUNwRCxTQUFTLENBQ1YsRUFDRCxRQUFRLEVBQUUsQ0FBQyxhQUFhLEVBQ3hCLE9BQU8sRUFBRSxVQUFVLEtBQ2YsS0FBSyxhQUVULHVCQUFDLHlCQUFVLElBQUMsU0FBUyxFQUFDLFNBQVMsR0FBRyxFQUNsQyxpQ0FBTSxTQUFTLEVBQUMsU0FBUywyQkFBa0IsSUFDcEMsQ0FDVixDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7SUFTRCxvQ0FBWTtJQVJkLFlBQVksQ0FBQyxXQUFXLEdBQUcsY0FBYyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHVzZUVtYmxhQ2Fyb3VzZWwsIHtcbiAgdHlwZSBVc2VFbWJsYUNhcm91c2VsVHlwZSxcbn0gZnJvbSBcImVtYmxhLWNhcm91c2VsLXJlYWN0XCI7XG5pbXBvcnQgeyBBcnJvd0xlZnQsIEFycm93UmlnaHQgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5cbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuXG50eXBlIENhcm91c2VsQXBpID0gVXNlRW1ibGFDYXJvdXNlbFR5cGVbMV07XG50eXBlIFVzZUNhcm91c2VsUGFyYW1ldGVycyA9IFBhcmFtZXRlcnM8dHlwZW9mIHVzZUVtYmxhQ2Fyb3VzZWw+O1xudHlwZSBDYXJvdXNlbE9wdGlvbnMgPSBVc2VDYXJvdXNlbFBhcmFtZXRlcnNbMF07XG50eXBlIENhcm91c2VsUGx1Z2luID0gVXNlQ2Fyb3VzZWxQYXJhbWV0ZXJzWzFdO1xuXG50eXBlIENhcm91c2VsUHJvcHMgPSB7XG4gIG9wdHM/OiBDYXJvdXNlbE9wdGlvbnM7XG4gIHBsdWdpbnM/OiBDYXJvdXNlbFBsdWdpbjtcbiAgb3JpZW50YXRpb24/OiBcImhvcml6b250YWxcIiB8IFwidmVydGljYWxcIjtcbiAgc2V0QXBpPzogKGFwaTogQ2Fyb3VzZWxBcGkpID0+IHZvaWQ7XG59O1xuXG50eXBlIENhcm91c2VsQ29udGV4dFByb3BzID0ge1xuICBjYXJvdXNlbFJlZjogUmV0dXJuVHlwZTx0eXBlb2YgdXNlRW1ibGFDYXJvdXNlbD5bMF07XG4gIGFwaTogUmV0dXJuVHlwZTx0eXBlb2YgdXNlRW1ibGFDYXJvdXNlbD5bMV07XG4gIHNjcm9sbFByZXY6ICgpID0+IHZvaWQ7XG4gIHNjcm9sbE5leHQ6ICgpID0+IHZvaWQ7XG4gIGNhblNjcm9sbFByZXY6IGJvb2xlYW47XG4gIGNhblNjcm9sbE5leHQ6IGJvb2xlYW47XG59ICYgQ2Fyb3VzZWxQcm9wcztcblxuY29uc3QgQ2Fyb3VzZWxDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxDYXJvdXNlbENvbnRleHRQcm9wcyB8IG51bGw+KG51bGwpO1xuXG5mdW5jdGlvbiB1c2VDYXJvdXNlbCgpIHtcbiAgY29uc3QgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoQ2Fyb3VzZWxDb250ZXh0KTtcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VDYXJvdXNlbCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgPENhcm91c2VsIC8+XCIpO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG5cbmNvbnN0IENhcm91c2VsID0gUmVhY3QuZm9yd2FyZFJlZjxcbiAgSFRNTERpdkVsZW1lbnQsXG4gIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50PiAmIENhcm91c2VsUHJvcHNcbj4oXG4gIChcbiAgICB7XG4gICAgICBvcmllbnRhdGlvbiA9IFwiaG9yaXpvbnRhbFwiLFxuICAgICAgb3B0cyxcbiAgICAgIHNldEFwaSxcbiAgICAgIHBsdWdpbnMsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIC4uLnByb3BzXG4gICAgfSxcbiAgICByZWYsXG4gICkgPT4ge1xuICAgIGNvbnN0IFtjYXJvdXNlbFJlZiwgYXBpXSA9IHVzZUVtYmxhQ2Fyb3VzZWwoXG4gICAgICB7XG4gICAgICAgIC4uLm9wdHMsXG4gICAgICAgIGF4aXM6IG9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIiA/IFwieFwiIDogXCJ5XCIsXG4gICAgICB9LFxuICAgICAgcGx1Z2lucyxcbiAgICApO1xuICAgIGNvbnN0IFtjYW5TY3JvbGxQcmV2LCBzZXRDYW5TY3JvbGxQcmV2XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbY2FuU2Nyb2xsTmV4dCwgc2V0Q2FuU2Nyb2xsTmV4dF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBvblNlbGVjdCA9IFJlYWN0LnVzZUNhbGxiYWNrKChhcGk6IENhcm91c2VsQXBpKSA9PiB7XG4gICAgICBpZiAoIWFwaSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldENhblNjcm9sbFByZXYoYXBpLmNhblNjcm9sbFByZXYoKSk7XG4gICAgICBzZXRDYW5TY3JvbGxOZXh0KGFwaS5jYW5TY3JvbGxOZXh0KCkpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IHNjcm9sbFByZXYgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICBhcGk/LnNjcm9sbFByZXYoKTtcbiAgICB9LCBbYXBpXSk7XG5cbiAgICBjb25zdCBzY3JvbGxOZXh0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgYXBpPy5zY3JvbGxOZXh0KCk7XG4gICAgfSwgW2FwaV0pO1xuXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICAgKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93TGVmdFwiKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzY3JvbGxQcmV2KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc2Nyb2xsTmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW3Njcm9sbFByZXYsIHNjcm9sbE5leHRdLFxuICAgICk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKCFhcGkgfHwgIXNldEFwaSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldEFwaShhcGkpO1xuICAgIH0sIFthcGksIHNldEFwaV0pO1xuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmICghYXBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb25TZWxlY3QoYXBpKTtcbiAgICAgIGFwaS5vbihcInJlSW5pdFwiLCBvblNlbGVjdCk7XG4gICAgICBhcGkub24oXCJzZWxlY3RcIiwgb25TZWxlY3QpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBhcGk/Lm9mZihcInNlbGVjdFwiLCBvblNlbGVjdCk7XG4gICAgICB9O1xuICAgIH0sIFthcGksIG9uU2VsZWN0XSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPENhcm91c2VsQ29udGV4dC5Qcm92aWRlclxuICAgICAgICB2YWx1ZT17e1xuICAgICAgICAgIGNhcm91c2VsUmVmLFxuICAgICAgICAgIGFwaTogYXBpLFxuICAgICAgICAgIG9wdHMsXG4gICAgICAgICAgb3JpZW50YXRpb246XG4gICAgICAgICAgICBvcmllbnRhdGlvbiB8fCAob3B0cz8uYXhpcyA9PT0gXCJ5XCIgPyBcInZlcnRpY2FsXCIgOiBcImhvcml6b250YWxcIiksXG4gICAgICAgICAgc2Nyb2xsUHJldixcbiAgICAgICAgICBzY3JvbGxOZXh0LFxuICAgICAgICAgIGNhblNjcm9sbFByZXYsXG4gICAgICAgICAgY2FuU2Nyb2xsTmV4dCxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIG9uS2V5RG93bkNhcHR1cmU9e2hhbmRsZUtleURvd259XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbihcInJlbGF0aXZlXCIsIGNsYXNzTmFtZSl9XG4gICAgICAgICAgcm9sZT1cInJlZ2lvblwiXG4gICAgICAgICAgYXJpYS1yb2xlZGVzY3JpcHRpb249XCJjYXJvdXNlbFwiXG4gICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICA+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQ2Fyb3VzZWxDb250ZXh0LlByb3ZpZGVyPlxuICAgICk7XG4gIH0sXG4pO1xuQ2Fyb3VzZWwuZGlzcGxheU5hbWUgPSBcIkNhcm91c2VsXCI7XG5cbmNvbnN0IENhcm91c2VsQ29udGVudCA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxEaXZFbGVtZW50LFxuICBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD5cbj4oKHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCByZWYpID0+IHtcbiAgY29uc3QgeyBjYXJvdXNlbFJlZiwgb3JpZW50YXRpb24gfSA9IHVzZUNhcm91c2VsKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17Y2Fyb3VzZWxSZWZ9IGNsYXNzTmFtZT1cIm92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgPGRpdlxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICBcImZsZXhcIixcbiAgICAgICAgICBvcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgPyBcIi1tbC00XCIgOiBcIi1tdC00IGZsZXgtY29sXCIsXG4gICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICApfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufSk7XG5DYXJvdXNlbENvbnRlbnQuZGlzcGxheU5hbWUgPSBcIkNhcm91c2VsQ29udGVudFwiO1xuXG5jb25zdCBDYXJvdXNlbEl0ZW0gPSBSZWFjdC5mb3J3YXJkUmVmPFxuICBIVE1MRGl2RWxlbWVudCxcbiAgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+XG4+KCh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSwgcmVmKSA9PiB7XG4gIGNvbnN0IHsgb3JpZW50YXRpb24gfSA9IHVzZUNhcm91c2VsKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e3JlZn1cbiAgICAgIHJvbGU9XCJncm91cFwiXG4gICAgICBhcmlhLXJvbGVkZXNjcmlwdGlvbj1cInNsaWRlXCJcbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgIFwibWluLXctMCBzaHJpbmstMCBncm93LTAgYmFzaXMtZnVsbFwiLFxuICAgICAgICBvcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgPyBcInBsLTRcIiA6IFwicHQtNFwiLFxuICAgICAgICBjbGFzc05hbWUsXG4gICAgICApfVxuICAgICAgey4uLnByb3BzfVxuICAgIC8+XG4gICk7XG59KTtcbkNhcm91c2VsSXRlbS5kaXNwbGF5TmFtZSA9IFwiQ2Fyb3VzZWxJdGVtXCI7XG5cbmNvbnN0IENhcm91c2VsUHJldmlvdXMgPSBSZWFjdC5mb3J3YXJkUmVmPFxuICBIVE1MQnV0dG9uRWxlbWVudCxcbiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIEJ1dHRvbj5cbj4oKHsgY2xhc3NOYW1lLCB2YXJpYW50ID0gXCJvdXRsaW5lXCIsIHNpemUgPSBcImljb25cIiwgLi4ucHJvcHMgfSwgcmVmKSA9PiB7XG4gIGNvbnN0IHsgb3JpZW50YXRpb24sIHNjcm9sbFByZXYsIGNhblNjcm9sbFByZXYgfSA9IHVzZUNhcm91c2VsKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8QnV0dG9uXG4gICAgICByZWY9e3JlZn1cbiAgICAgIHZhcmlhbnQ9e3ZhcmlhbnR9XG4gICAgICBzaXplPXtzaXplfVxuICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgXCJhYnNvbHV0ZSAgaC04IHctOCByb3VuZGVkLWZ1bGxcIixcbiAgICAgICAgb3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiXG4gICAgICAgICAgPyBcIi1sZWZ0LTEyIHRvcC0xLzIgLXRyYW5zbGF0ZS15LTEvMlwiXG4gICAgICAgICAgOiBcIi10b3AtMTIgbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiByb3RhdGUtOTBcIixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgKX1cbiAgICAgIGRpc2FibGVkPXshY2FuU2Nyb2xsUHJldn1cbiAgICAgIG9uQ2xpY2s9e3Njcm9sbFByZXZ9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAgPEFycm93TGVmdCBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNyLW9ubHlcIj5QcmV2aW91cyBzbGlkZTwvc3Bhbj5cbiAgICA8L0J1dHRvbj5cbiAgKTtcbn0pO1xuQ2Fyb3VzZWxQcmV2aW91cy5kaXNwbGF5TmFtZSA9IFwiQ2Fyb3VzZWxQcmV2aW91c1wiO1xuXG5jb25zdCBDYXJvdXNlbE5leHQgPSBSZWFjdC5mb3J3YXJkUmVmPFxuICBIVE1MQnV0dG9uRWxlbWVudCxcbiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIEJ1dHRvbj5cbj4oKHsgY2xhc3NOYW1lLCB2YXJpYW50ID0gXCJvdXRsaW5lXCIsIHNpemUgPSBcImljb25cIiwgLi4ucHJvcHMgfSwgcmVmKSA9PiB7XG4gIGNvbnN0IHsgb3JpZW50YXRpb24sIHNjcm9sbE5leHQsIGNhblNjcm9sbE5leHQgfSA9IHVzZUNhcm91c2VsKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8QnV0dG9uXG4gICAgICByZWY9e3JlZn1cbiAgICAgIHZhcmlhbnQ9e3ZhcmlhbnR9XG4gICAgICBzaXplPXtzaXplfVxuICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgXCJhYnNvbHV0ZSBoLTggdy04IHJvdW5kZWQtZnVsbFwiLFxuICAgICAgICBvcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgICAgICA/IFwiLXJpZ2h0LTEyIHRvcC0xLzIgLXRyYW5zbGF0ZS15LTEvMlwiXG4gICAgICAgICAgOiBcIi1ib3R0b20tMTIgbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiByb3RhdGUtOTBcIixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgKX1cbiAgICAgIGRpc2FibGVkPXshY2FuU2Nyb2xsTmV4dH1cbiAgICAgIG9uQ2xpY2s9e3Njcm9sbE5leHR9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAgPEFycm93UmlnaHQgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+TmV4dCBzbGlkZTwvc3Bhbj5cbiAgICA8L0J1dHRvbj5cbiAgKTtcbn0pO1xuQ2Fyb3VzZWxOZXh0LmRpc3BsYXlOYW1lID0gXCJDYXJvdXNlbE5leHRcIjtcblxuZXhwb3J0IHtcbiAgdHlwZSBDYXJvdXNlbEFwaSxcbiAgQ2Fyb3VzZWwsXG4gIENhcm91c2VsQ29udGVudCxcbiAgQ2Fyb3VzZWxJdGVtLFxuICBDYXJvdXNlbFByZXZpb3VzLFxuICBDYXJvdXNlbE5leHQsXG59O1xuIl19