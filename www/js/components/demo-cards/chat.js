define(["require", "exports", "react/jsx-runtime", "react", "lucide-react", "@/lib/utils", "@/components/ui/avatar", "@/components/ui/button", "@/components/ui/card", "@/components/ui/command", "@/components/ui/dialog", "@/components/ui/input", "@/components/ui/tooltip"], function (require, exports, jsx_runtime_1, React, lucide_react_1, utils_1, avatar_1, button_1, card_1, command_1, dialog_1, input_1, tooltip_1) {
    "use client";
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CardsChat = CardsChat;
    const users = [
        {
            name: "Olivia Martin",
            email: "m@example.com",
            avatar: "/avatars/01.png",
        },
        {
            name: "Isabella Nguyen",
            email: "isabella.nguyen@email.com",
            avatar: "/avatars/03.png",
        },
        {
            name: "Emma Wilson",
            email: "emma@example.com",
            avatar: "/avatars/05.png",
        },
        {
            name: "Jackson Lee",
            email: "lee@example.com",
            avatar: "/avatars/02.png",
        },
        {
            name: "William Kim",
            email: "will@email.com",
            avatar: "/avatars/04.png",
        },
    ];
    function CardsChat() {
        const [open, setOpen] = React.useState(false);
        const [selectedUsers, setSelectedUsers] = React.useState([]);
        const [messages, setMessages] = React.useState([
            {
                role: "agent",
                content: "Hi, how can I help you today?",
            },
            {
                role: "user",
                content: "Hey, I'm having trouble with my account.",
            },
            {
                role: "agent",
                content: "What seems to be the problem?",
            },
            {
                role: "user",
                content: "I can't log in.",
            },
        ]);
        const [input, setInput] = React.useState("");
        const inputLength = input.trim().length;
        return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: "flex flex-row items-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4", children: [(0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: "/avatars/01.png", alt: "Image" }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: "OM" })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium leading-none", children: "Sofia Davis" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "m@example.com" })] })] }), (0, jsx_runtime_1.jsx)(tooltip_1.TooltipProvider, { delayDuration: 0, children: (0, jsx_runtime_1.jsxs)(tooltip_1.Tooltip, { children: [(0, jsx_runtime_1.jsx)(tooltip_1.TooltipTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { size: "icon", variant: "outline", className: "ml-auto rounded-full", onClick: () => setOpen(true), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, {}), (0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: "New message" })] }) }), (0, jsx_runtime_1.jsx)(tooltip_1.TooltipContent, { sideOffset: 10, children: "New message" })] }) })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "space-y-4", children: messages.map((message, index) => ((0, jsx_runtime_1.jsx)("div", { className: (0, utils_1.cn)("flex w-max max-w-[75%] flex-col gap-2 rounded-lg px-3 py-2 text-sm", message.role === "user"
                                        ? "ml-auto bg-primary text-primary-foreground"
                                        : "bg-muted"), children: message.content }, index))) }) }), (0, jsx_runtime_1.jsx)(card_1.CardFooter, { children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: (event) => {
                                    event.preventDefault();
                                    if (inputLength === 0)
                                        return;
                                    setMessages([
                                        ...messages,
                                        {
                                            role: "user",
                                            content: input,
                                        },
                                    ]);
                                    setInput("");
                                }, className: "flex w-full items-center space-x-2", children: [(0, jsx_runtime_1.jsx)(input_1.Input, { id: "message", placeholder: "Type your message...", className: "flex-1", autoComplete: "off", value: input, onChange: (event) => setInput(event.target.value) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { type: "submit", size: "icon", disabled: inputLength === 0, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Send, {}), (0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: "Send" })] })] }) })] }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: open, onOpenChange: setOpen, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: "gap-0 p-0 outline-none", children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { className: "px-4 pb-4 pt-5", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "New message" }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: "Invite a user to this thread. This will create a new group message." })] }), (0, jsx_runtime_1.jsxs)(command_1.Command, { className: "overflow-hidden rounded-t-none border-t bg-transparent", children: [(0, jsx_runtime_1.jsx)(command_1.CommandInput, { placeholder: "Search user..." }), (0, jsx_runtime_1.jsxs)(command_1.CommandList, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandEmpty, { children: "No users found." }), (0, jsx_runtime_1.jsx)(command_1.CommandGroup, { className: "p-2", children: users.map((user) => ((0, jsx_runtime_1.jsxs)(command_1.CommandItem, { className: "flex items-center px-2", onSelect: () => {
                                                        if (selectedUsers.includes(user)) {
                                                            return setSelectedUsers(selectedUsers.filter((selectedUser) => selectedUser !== user));
                                                        }
                                                        return setSelectedUsers([...users].filter((u) => [...selectedUsers, user].includes(u)));
                                                    }, children: [(0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: user.avatar, alt: "Image" }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: user.name[0] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "ml-2", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium leading-none", children: user.name }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: user.email })] }), selectedUsers.includes(user) ? ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: "ml-auto flex h-5 w-5 text-primary" })) : null] }, user.email))) })] })] }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { className: "flex items-center border-t p-4 sm:justify-between", children: [selectedUsers.length > 0 ? ((0, jsx_runtime_1.jsx)("div", { className: "flex -space-x-2 overflow-hidden", children: selectedUsers.map((user) => ((0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { className: "inline-block border-2 border-background", children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: user.avatar }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: user.name[0] })] }, user.email))) })) : ((0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "Select users to add to this thread." })), (0, jsx_runtime_1.jsx)(button_1.Button, { disabled: selectedUsers.length < 2, onClick: () => {
                                            setOpen(false);
                                        }, children: "Continue" })] })] }) })] }));
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2RlbW8tY2FyZHMvY2hhdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtJQUFBLFlBQVksQ0FBQzs7O0lBb0ViLDhCQTZMQztJQTNORCxNQUFNLEtBQUssR0FBRztRQUNaO1lBQ0UsSUFBSSxFQUFFLGVBQWU7WUFDckIsS0FBSyxFQUFFLGVBQWU7WUFDdEIsTUFBTSxFQUFFLGlCQUFpQjtTQUMxQjtRQUNEO1lBQ0UsSUFBSSxFQUFFLGlCQUFpQjtZQUN2QixLQUFLLEVBQUUsMkJBQTJCO1lBQ2xDLE1BQU0sRUFBRSxpQkFBaUI7U0FDMUI7UUFDRDtZQUNFLElBQUksRUFBRSxhQUFhO1lBQ25CLEtBQUssRUFBRSxrQkFBa0I7WUFDekIsTUFBTSxFQUFFLGlCQUFpQjtTQUMxQjtRQUNEO1lBQ0UsSUFBSSxFQUFFLGFBQWE7WUFDbkIsS0FBSyxFQUFFLGlCQUFpQjtZQUN4QixNQUFNLEVBQUUsaUJBQWlCO1NBQzFCO1FBQ0Q7WUFDRSxJQUFJLEVBQUUsYUFBYTtZQUNuQixLQUFLLEVBQUUsZ0JBQWdCO1lBQ3ZCLE1BQU0sRUFBRSxpQkFBaUI7U0FDMUI7S0FDTyxDQUFDO0lBSVgsU0FBZ0IsU0FBUztRQUN2QixNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQVMsRUFBRSxDQUFDLENBQUM7UUFFckUsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1lBQzdDO2dCQUNFLElBQUksRUFBRSxPQUFPO2dCQUNiLE9BQU8sRUFBRSwrQkFBK0I7YUFDekM7WUFDRDtnQkFDRSxJQUFJLEVBQUUsTUFBTTtnQkFDWixPQUFP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R0FBRyxDQUFDLEVBQ2xDLE9BQU8sRUFBRSxHQUFHLEVBQUU7NENBQ1osT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO3dDQUNqQixDQUFDLHlCQUdNLElBQ0ksSUFDRCxHQUNULElBQ1IsQ0FDSixDQUFDO0lBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENoZWNrLCBQbHVzLCBTZW5kIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG5pbXBvcnQgeyBjbiB9IGZyb20gXCJAL2xpYi91dGlsc1wiO1xuaW1wb3J0IHsgQXZhdGFyLCBBdmF0YXJGYWxsYmFjaywgQXZhdGFySW1hZ2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2F2YXRhclwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7XG4gIENhcmQsXG4gIENhcmRDb250ZW50LFxuICBDYXJkRm9vdGVyLFxuICBDYXJkSGVhZGVyLFxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIjtcbmltcG9ydCB7XG4gIENvbW1hbmQsXG4gIENvbW1hbmRFbXB0eSxcbiAgQ29tbWFuZEdyb3VwLFxuICBDb21tYW5kSW5wdXQsXG4gIENvbW1hbmRJdGVtLFxuICBDb21tYW5kTGlzdCxcbn0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9jb21tYW5kXCI7XG5pbXBvcnQge1xuICBEaWFsb2csXG4gIERpYWxvZ0NvbnRlbnQsXG4gIERpYWxvZ0Rlc2NyaXB0aW9uLFxuICBEaWFsb2dGb290ZXIsXG4gIERpYWxvZ0hlYWRlcixcbiAgRGlhbG9nVGl0bGUsXG59IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvZGlhbG9nXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7XG4gIFRvb2x0aXAsXG4gIFRvb2x0aXBDb250ZW50LFxuICBUb29sdGlwUHJvdmlkZXIsXG4gIFRvb2x0aXBUcmlnZ2VyLFxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3Rvb2x0aXBcIjtcblxuY29uc3QgdXNlcnMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIk9saXZpYSBNYXJ0aW5cIixcbiAgICBlbWFpbDogXCJtQGV4YW1wbGUuY29tXCIsXG4gICAgYXZhdGFyOiBcIi9hdmF0YXJzLzAxLnBuZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJJc2FiZWxsYSBOZ3V5ZW5cIixcbiAgICBlbWFpbDogXCJpc2FiZWxsYS5uZ3V5ZW5AZW1haWwuY29tXCIsXG4gICAgYXZhdGFyOiBcIi9hdmF0YXJzLzAzLnBuZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJFbW1hIFdpbHNvblwiLFxuICAgIGVtYWlsOiBcImVtbWFAZXhhbXBsZS5jb21cIixcbiAgICBhdmF0YXI6IFwiL2F2YXRhcnMvMDUucG5nXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkphY2tzb24gTGVlXCIsXG4gICAgZW1haWw6IFwibGVlQGV4YW1wbGUuY29tXCIsXG4gICAgYXZhdGFyOiBcIi9hdmF0YXJzLzAyLnBuZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJXaWxsaWFtIEtpbVwiLFxuICAgIGVtYWlsOiBcIndpbGxAZW1haWwuY29tXCIsXG4gICAgYXZhdGFyOiBcIi9hdmF0YXJzLzA0LnBuZ1wiLFxuICB9LFxuXSBhcyBjb25zdDtcblxudHlwZSBVc2VyID0gKHR5cGVvZiB1c2VycylbbnVtYmVyXTtcblxuZXhwb3J0IGZ1bmN0aW9uIENhcmRzQ2hhdCgpIHtcbiAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRVc2Vycywgc2V0U2VsZWN0ZWRVc2Vyc10gPSBSZWFjdC51c2VTdGF0ZTxVc2VyW10+KFtdKTtcblxuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IFJlYWN0LnVzZVN0YXRlKFtcbiAgICB7XG4gICAgICByb2xlOiBcImFnZW50XCIsXG4gICAgICBjb250ZW50OiBcIkhpLCBob3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCIsXG4gICAgfSxcbiAgICB7XG4gICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgIGNvbnRlbnQ6IFwiSGV5LCBJJ20gaGF2aW5nIHRyb3VibGUgd2l0aCBteSBhY2NvdW50LlwiLFxuICAgIH0sXG4gICAge1xuICAgICAgcm9sZTogXCJhZ2VudFwiLFxuICAgICAgY29udGVudDogXCJXaGF0IHNlZW1zIHRvIGJlIHRoZSBwcm9ibGVtP1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICBjb250ZW50OiBcIkkgY2FuJ3QgbG9nIGluLlwiLFxuICAgIH0sXG4gIF0pO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IFJlYWN0LnVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBpbnB1dExlbmd0aCA9IGlucHV0LnRyaW0oKS5sZW5ndGg7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPENhcmQ+XG4gICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT1cImZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTRcIj5cbiAgICAgICAgICAgIDxBdmF0YXI+XG4gICAgICAgICAgICAgIDxBdmF0YXJJbWFnZSBzcmM9XCIvYXZhdGFycy8wMS5wbmdcIiBhbHQ9XCJJbWFnZVwiIC8+XG4gICAgICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz5PTTwvQXZhdGFyRmFsbGJhY2s+XG4gICAgICAgICAgICA8L0F2YXRhcj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbGVhZGluZy1ub25lXCI+U29maWEgRGF2aXM8L3A+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+bUBleGFtcGxlLmNvbTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxUb29sdGlwUHJvdmlkZXIgZGVsYXlEdXJhdGlvbj17MH0+XG4gICAgICAgICAgICA8VG9vbHRpcD5cbiAgICAgICAgICAgICAgPFRvb2x0aXBUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtYXV0byByb3VuZGVkLWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0T3Blbih0cnVlKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8UGx1cyAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPk5ldyBtZXNzYWdlPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L1Rvb2x0aXBUcmlnZ2VyPlxuICAgICAgICAgICAgICA8VG9vbHRpcENvbnRlbnQgc2lkZU9mZnNldD17MTB9Pk5ldyBtZXNzYWdlPC9Ub29sdGlwQ29udGVudD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICA8L1Rvb2x0aXBQcm92aWRlcj5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICBcImZsZXggdy1tYXggbWF4LXctWzc1JV0gZmxleC1jb2wgZ2FwLTIgcm91bmRlZC1sZyBweC0zIHB5LTIgdGV4dC1zbVwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcInVzZXJcIlxuICAgICAgICAgICAgICAgICAgICA/IFwibWwtYXV0byBiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcImJnLW11dGVkXCIsXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgIDxDYXJkRm9vdGVyPlxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICBvblN1Ym1pdD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGlmIChpbnB1dExlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhbXG4gICAgICAgICAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBpbnB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgc2V0SW5wdXQoXCJcIik7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIGlkPVwibWVzc2FnZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSB5b3VyIG1lc3NhZ2UuLi5cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTFcIlxuICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHNldElucHV0KGV2ZW50LnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCIgc2l6ZT1cImljb25cIiBkaXNhYmxlZD17aW5wdXRMZW5ndGggPT09IDB9PlxuICAgICAgICAgICAgICA8U2VuZCAvPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+U2VuZDwvc3Bhbj5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9DYXJkRm9vdGVyPlxuICAgICAgPC9DYXJkPlxuICAgICAgPERpYWxvZyBvcGVuPXtvcGVufSBvbk9wZW5DaGFuZ2U9e3NldE9wZW59PlxuICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJnYXAtMCBwLTAgb3V0bGluZS1ub25lXCI+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlciBjbGFzc05hbWU9XCJweC00IHBiLTQgcHQtNVwiPlxuICAgICAgICAgICAgPERpYWxvZ1RpdGxlPk5ldyBtZXNzYWdlPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgSW52aXRlIGEgdXNlciB0byB0aGlzIHRocmVhZC4gVGhpcyB3aWxsIGNyZWF0ZSBhIG5ldyBncm91cFxuICAgICAgICAgICAgICBtZXNzYWdlLlxuICAgICAgICAgICAgPC9EaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICA8Q29tbWFuZCBjbGFzc05hbWU9XCJvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC10LW5vbmUgYm9yZGVyLXQgYmctdHJhbnNwYXJlbnRcIj5cbiAgICAgICAgICAgIDxDb21tYW5kSW5wdXQgcGxhY2Vob2xkZXI9XCJTZWFyY2ggdXNlci4uLlwiIC8+XG4gICAgICAgICAgICA8Q29tbWFuZExpc3Q+XG4gICAgICAgICAgICAgIDxDb21tYW5kRW1wdHk+Tm8gdXNlcnMgZm91bmQuPC9Db21tYW5kRW1wdHk+XG4gICAgICAgICAgICAgIDxDb21tYW5kR3JvdXAgY2xhc3NOYW1lPVwicC0yXCI+XG4gICAgICAgICAgICAgICAge3VzZXJzLm1hcCgodXNlcikgPT4gKFxuICAgICAgICAgICAgICAgICAgPENvbW1hbmRJdGVtXG4gICAgICAgICAgICAgICAgICAgIGtleT17dXNlci5lbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgcHgtMlwiXG4gICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVXNlcnMuaW5jbHVkZXModXNlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTZWxlY3RlZFVzZXJzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFVzZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZWN0ZWRVc2VyKSA9PiBzZWxlY3RlZFVzZXIgIT09IHVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTZWxlY3RlZFVzZXJzKFxuICAgICAgICAgICAgICAgICAgICAgICAgWy4uLnVzZXJzXS5maWx0ZXIoKHUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFsuLi5zZWxlY3RlZFVzZXJzLCB1c2VyXS5pbmNsdWRlcyh1KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEF2YXRhcj5cbiAgICAgICAgICAgICAgICAgICAgICA8QXZhdGFySW1hZ2Ugc3JjPXt1c2VyLmF2YXRhcn0gYWx0PVwiSW1hZ2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz57dXNlci5uYW1lWzBdfTwvQXZhdGFyRmFsbGJhY2s+XG4gICAgICAgICAgICAgICAgICAgIDwvQXZhdGFyPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIGxlYWRpbmctbm9uZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyLmVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFVzZXJzLmluY2x1ZGVzKHVzZXIpID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxDaGVjayBjbGFzc05hbWU9XCJtbC1hdXRvIGZsZXggaC01IHctNSB0ZXh0LXByaW1hcnlcIiAvPlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgIDwvQ29tbWFuZEl0ZW0+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvQ29tbWFuZEdyb3VwPlxuICAgICAgICAgICAgPC9Db21tYW5kTGlzdD5cbiAgICAgICAgICA8L0NvbW1hbmQ+XG4gICAgICAgICAgPERpYWxvZ0Zvb3RlciBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBib3JkZXItdCBwLTQgc206anVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICB7c2VsZWN0ZWRVc2Vycy5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggLXNwYWNlLXgtMiBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICB7c2VsZWN0ZWRVc2Vycy5tYXAoKHVzZXIpID0+IChcbiAgICAgICAgICAgICAgICAgIDxBdmF0YXJcbiAgICAgICAgICAgICAgICAgICAga2V5PXt1c2VyLmVtYWlsfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgYm9yZGVyLTIgYm9yZGVyLWJhY2tncm91bmRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8QXZhdGFySW1hZ2Ugc3JjPXt1c2VyLmF2YXRhcn0gLz5cbiAgICAgICAgICAgICAgICAgICAgPEF2YXRhckZhbGxiYWNrPnt1c2VyLm5hbWVbMF19PC9BdmF0YXJGYWxsYmFjaz5cbiAgICAgICAgICAgICAgICAgIDwvQXZhdGFyPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgU2VsZWN0IHVzZXJzIHRvIGFkZCB0byB0aGlzIHRocmVhZC5cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbGVjdGVkVXNlcnMubGVuZ3RoIDwgMn1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDb250aW51ZVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9EaWFsb2dGb290ZXI+XG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDwvRGlhbG9nPlxuICAgIDwvPlxuICApO1xufVxuIl19